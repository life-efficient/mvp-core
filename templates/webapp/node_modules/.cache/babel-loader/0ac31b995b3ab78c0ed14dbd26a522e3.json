{"ast":null,"code":"import _defineProperty from \"/home/ice/supermedia/webapp/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ice/supermedia/webapp/src/adminComponents/UpdateBrands.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { makeGetRequest, makePostRequest } from \"../api_calls\";\n\nclass UpdateBrands extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      console.log('setting brands');\n      var brands = {\n        'Scotch_and_Soda': {\n          styles: ['streetwear', 'preppy', 'high_end', 'italian', 'sartorial']\n        },\n        'Nordstrom_rack': {\n          styles: ['streetwear', 'preppy']\n        }\n      };\n      makeGetRequest('admin-brands', brands => {\n        brands = brands.body;\n        brands = JSON.parse(brands);\n        brands = brands.reduce((out, arr) => {\n          console.log(out);\n          arr = Object.keys(arr).includes('styles') ? arr : _objectSpread({}, arr, {\n            styles: []\n          });\n          out[arr.brand] = arr;\n          return out;\n        }, {});\n        console.log(brands);\n        this.setState({\n          brands: brands,\n          current_brand: Object.keys(brands)[0],\n          ready: true\n        }, () => {\n          console.log('STATE:', this.state);\n        });\n      });\n    };\n\n    this.handleChangeBrand = e => {\n      console.log(e.target);\n      this.setState({\n        current_brand: e.target.value\n      }, () => {\n        console.log('selected brand:', this.state.current_brand);\n      });\n    };\n\n    this.getOptions = section => {\n      if (this.state.ready) {\n        console.log(this.state.current_brand);\n        console.log(this.state.brands[this.state.current_brand]);\n        var options = this.styles.map((item, idx) => {\n          return React.createElement(\"label\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"checkbox\",\n            name: section,\n            value: item,\n            checked: this.state.brands[this.state.current_brand].styles.includes(item),\n            onChange: this.handleCheckboxChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }), item, React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }));\n        });\n        return options;\n      } else {\n        console.log('not yet ready');\n        return null;\n      }\n    };\n\n    this.handleCheckboxChange = e => {\n      console.log('changing selection:', e.target.value);\n      var current_brand = this.state.current_brand;\n      var options = this.state.brands[current_brand].styles; // list of currently selected styles\n\n      if (options.includes(e.target.value)) {\n        // if checked then remove\n        options = options.filter(op => {\n          return op != e.target.value;\n        });\n      } else {\n        // if unchecked then append\n        options = [...options, e.target.value];\n      }\n\n      console.log('current ops:', options);\n      this.setState({\n        brands: _objectSpread({}, this.state.brands, {\n          [current_brand]: _objectSpread({}, this.state.brands[current_brand], {\n            styles: options\n          })\n        })\n      }, () => {\n        console.log(this.state.brands[current_brand].styles);\n        makePostRequest('admin-brands', {\n          brand: current_brand,\n          styles: this.state.brands[current_brand].styles\n        }, () => {\n          console.log('brand updated');\n        });\n      });\n    };\n\n    this.state = {\n      brands: {},\n      ready: false\n    };\n    this.styles = ['streetwear', 'preppy', 'high_end', 'italian', 'sartorial', 'boho', 'formal', 'sporty', 'technical'];\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Brands\"), React.createElement(\"select\", {\n      onChange: this.handleChangeBrand,\n      value: this.state.current_brand,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, Object.keys(this.state.brands).map(item => {\n      return React.createElement(\"option\", {\n        value: item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, item);\n    })), React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Styles\"), this.getOptions('styles')));\n  }\n\n}\n\nexport default UpdateBrands;","map":{"version":3,"sources":["/home/ice/supermedia/webapp/src/adminComponents/UpdateBrands.js"],"names":["React","Component","makeGetRequest","makePostRequest","UpdateBrands","constructor","props","componentDidMount","console","log","brands","styles","body","JSON","parse","reduce","out","arr","Object","keys","includes","brand","setState","current_brand","ready","state","handleChangeBrand","e","target","value","getOptions","section","options","map","item","idx","handleCheckboxChange","filter","op","render"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\nimport { makeGetRequest, makePostRequest } from \"../api_calls\";\n\nclass UpdateBrands extends Component {\n    constructor(props){\n        super(props)\n        this.state = {brands: {}, ready: false}\n        this.styles = [\n            'streetwear',\n            'preppy',\n            'high_end',\n            'italian',\n            'sartorial',\n            'boho',\n            'formal',\n            'sporty',\n            'technical'\n        ]\n    }\n\n    componentDidMount = () => {\n        console.log('setting brands')\n        var brands = {\n            'Scotch_and_Soda': {\n                styles: [\n                    'streetwear',\n                    'preppy',\n                    'high_end',\n                    'italian',\n                    'sartorial'\n                ]\n            },\n            'Nordstrom_rack': {\n                styles: [\n                    'streetwear',\n                    'preppy'\n                ]\n            }\n        }\n        makeGetRequest('admin-brands',\n            (brands) => {\n                brands = brands.body\n                brands = JSON.parse(brands)\n         \n                brands = brands.reduce(\n                    (out, arr) => {\n                        console.log(out)\n                        arr = Object.keys(arr).includes('styles') ? arr : {...arr, styles: []}\n                        out[arr.brand] = arr\n                        return out\n                    },\n                    {}\n                )\n                console.log(brands)\n                this.setState({\n                    brands: brands,\n                    current_brand: Object.keys(brands)[0],\n                    ready: true\n                },\n                    () => {\n                        console.log('STATE:', this.state)\n                    }\n                )\n            }\n        )\n    }\n\n    handleChangeBrand = (e) => {\n        console.log(e.target)\n        this.setState({current_brand: e.target.value}, \n            () => {console.log('selected brand:', this.state.current_brand)}    \n        )\n    }\n\n    getOptions = (section) => {\n        if (this.state.ready) {\n            console.log(this.state.current_brand)\n            console.log(this.state.brands[this.state.current_brand])\n            var options = this.styles.map(\n                (item, idx) => {\n                    return (\n                        <label>\n                            <input type=\"checkbox\" name={section} value={item} checked={this.state.brands[this.state.current_brand].styles.includes(item)} onChange={this.handleCheckboxChange}/>\n                        {item}\n                            <br/>\n                        </label>\n                    )\n                }\n            )\n            return options\n        }\n        else {\n            console.log('not yet ready')\n            return null\n        }\n    }\n\n    handleCheckboxChange = (e) => {\n        console.log('changing selection:', e.target.value)\n        var current_brand = this.state.current_brand\n        var options = this.state.brands[current_brand].styles       // list of currently selected styles\n        if (options.includes(e.target.value)) {     // if checked then remove\n            options = options.filter(op => {return op != e.target.value})\n        }\n        else {                                      // if unchecked then append\n            options = [...options, e.target.value]\n        }\n        console.log('current ops:', options)\n        this.setState({\n            brands:\n                {\n                    ...this.state.brands,\n                    [current_brand]: {\n                        ...this.state.brands[current_brand],\n                        styles: options\n                    }\n                }\n        },\n            () => {\n                console.log(this.state.brands[current_brand].styles)\n                makePostRequest('admin-brands', \n                    {\n                        brand: current_brand, \n                        styles: this.state.brands[current_brand].styles\n                    },\n                    () => {\n                        console.log('brand updated')\n                    }\n                )\n            }\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"body\">\n                <div className=\"panel\">\n                    <div className=\"large\">\n                        Brands\n                    </div>\n                    <select onChange={this.handleChangeBrand} value={this.state.current_brand}>\n                        {\n                            Object.keys(this.state.brands).map(\n                                (item) => {return <option value={item}>{item}</option>}\n                            )\n                        }\n                    </select>\n                    <div className=\"medium\">\n                        Styles\n                    </div>\n                    {this.getOptions('styles')}       \n                </div>\n            </div>\n        )\n    }\n\n}\n\nexport default UpdateBrands"]},"metadata":{},"sourceType":"module"}