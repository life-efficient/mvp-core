{"ast":null,"code":"var _jsxFileName = \"/home/ice/supermedia/webapp/src/components/NewRequest.js\";\nimport React, { Component } from \"react\";\nimport posed from 'react-pose';\nimport \"./NewRequest.css\";\nimport \"./store.css\";\nimport { Auth } from \"aws-amplify\";\nimport { connect } from \"react-redux\";\nimport { makeGetRequest, makePostRequest } from \"../api_calls\";\n\nclass NewRequest extends Component {\n  constructor(props) {\n    super(props);\n\n    this.makeRequest = () => {\n      console.log('making request');\n      makePostRequest('make-request', this.state, data => {\n        console.log('request made');\n        console.log(data);\n      }); // Auth.currentSession()\n      // .then(\n      //     data => {\n      //         var IDToken = data.getIdToken().getJwtToken()\n      //         var options = {\n      //             method: 'POST',\n      //             mode: 'cors',\n      //             body: JSON.stringify(this.state),\n      //             headers: {\n      //                 \"Authorization\": IDToken,\n      //                 'Content-Type': 'application/json'\n      //             }\n      //         }\n      //         fetch(\"https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/make-request\", options)\n      //         .then(\n      //             makeGetRequest('get-my-requests', \n      //                 (requests) => {\n      //                     requests = JSON.parse(requests.body)\n      //                     this.props.setRequests(requests)\n      //                     this.props.history.push('/app/home/requests')\n      //                     window.analytics.track('Request made')\n      //                     //return <Redirect to=\"/profile\" />         // not\n      //                 }\n      //             )\n      //         )\n      //     },\n      //     err => {\n      //         console.log('AN ERROR OCCURED WHILST GETTING THE SESSION')\n      //         console.log(err)\n      //     }\n      // )\n      // .catch(\n      //     (err) => {console.log(err)}\n      // )\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      }, () => {\n        console.log(this.state);\n      });\n    };\n\n    this.state = {\n      request: '',\n      tags: ['vintage', 'second hand']\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"field-container long-field-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-title\",\n      style: {\n        fontFamily: 'var(--font1)'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Describe your style and what you're looking for\"), React.createElement(\"textarea\", {\n      className: \"text-response\",\n      id: \"request\",\n      placeholder: \"I'm looking for...\",\n      onChange: this.handleChange,\n      value: this.state.request,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: this.state.request == '' ? this.props.not_now : () => {\n        this.makeRequest();\n        this.props.onSubmit();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, this.state.request == '' ? 'Nothing right now' : 'Submit'));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setRequests: () => {\n      console.log('settign requests');\n      makeGetRequest('get-my-requests', data => {\n        data = JSON.parse(data.body);\n        console.log(data);\n        dispatch({\n          type: \"SET_REQUESTS\",\n          requests: data\n        });\n        console.log('set requests');\n      });\n    }\n  };\n};\n\nexport default NewRequest = connect(null, mapDispatchToProps)(NewRequest);","map":{"version":3,"sources":["/home/ice/supermedia/webapp/src/components/NewRequest.js"],"names":["React","Component","posed","Auth","connect","makeGetRequest","makePostRequest","NewRequest","constructor","props","makeRequest","console","log","state","data","handleChange","e","setState","target","id","value","request","tags","render","fontFamily","not_now","onSubmit","mapDispatchToProps","dispatch","setRequests","JSON","parse","body","type","requests"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,YAAlB;AACA,OAAO,kBAAP;AACA,OAAO,aAAP;AACA,SAASC,IAAT,QAAqB,aAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,cAAT,EAAyBC,eAAzB,QAAgD,cAAhD;;AAEA,MAAMC,UAAN,SAAyBN,SAAzB,CAAmC;AAC/BO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAWnBC,WAXmB,GAWL,MAAM;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAN,MAAAA,eAAe,CAAC,cAAD,EAAiB,KAAKO,KAAtB,EACVC,IAAD,IAAU;AACNH,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACH,OAJU,CAAf,CAFgB,CAQhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KArDkB;;AAAA,SAuDnBC,YAvDmB,GAuDHC,CAAD,IAAO;AAClB,WAAKC,QAAL,CAAc;AAAC,SAACD,CAAC,CAACE,MAAF,CAASC,EAAV,GAAeH,CAAC,CAACE,MAAF,CAASE;AAAzB,OAAd,EACI,MAAM;AACFT,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB;AACH,OAHL;AAIH,KA5DkB;;AAEf,SAAKA,KAAL,GAAa;AACTQ,MAAAA,OAAO,EAAE,EADA;AAETC,MAAAA,IAAI,EAAE,CACF,SADE,EAEF,aAFE;AAFG,KAAb;AAOH;;AAqDDC,EAAAA,MAAM,GAAG;AACL,WACI,0CACI;AAAK,MAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAA6B,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDADJ,EAII;AAAU,MAAA,SAAS,EAAC,eAApB;AAAoC,MAAA,EAAE,EAAC,SAAvC;AAAiD,MAAA,WAAW,EAAC,oBAA7D;AAAkF,MAAA,QAAQ,EAAE,KAAKT,YAAjG;AAA+G,MAAA,KAAK,EAAE,KAAKF,KAAL,CAAWQ,OAAjI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CADJ,EAcI;AAAQ,MAAA,OAAO,EAAE,KAAKR,KAAL,CAAWQ,OAAX,IAAsB,EAAtB,GAA2B,KAAKZ,KAAL,CAAWgB,OAAtC,GAAgD,MAAM;AAAC,aAAKf,WAAL;AAAoB,aAAKD,KAAL,CAAWiB,QAAX;AAAsB,OAAlH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKb,KAAL,CAAWQ,OAAX,IAAsB,EAAtB,GAA2B,mBAA3B,GAAiD,QADtD,CAdJ,CADJ;AAoBH;;AApF8B;;AAuFnC,MAAMM,kBAAkB,GAAIC,QAAD,IAAc;AACrC,SAAO;AACHC,IAAAA,WAAW,EAAE,MAAM;AACflB,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACCP,MAAAA,cAAc,CAAC,iBAAD,EAAoBS,IAAI,IAAI;AACvCA,QAAAA,IAAI,GAAGgB,IAAI,CAACC,KAAL,CAAWjB,IAAI,CAACkB,IAAhB,CAAP;AACArB,QAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACAc,QAAAA,QAAQ,CAAC;AAACK,UAAAA,IAAI,EAAE,cAAP;AAAuBC,UAAAA,QAAQ,EAAEpB;AAAjC,SAAD,CAAR;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH,OALc,CAAd;AAMJ;AATE,GAAP;AAWH,CAZD;;AAcA,eAAeL,UAAU,GAAGH,OAAO,CAAC,IAAD,EAAOuB,kBAAP,CAAP,CAAkCpB,UAAlC,CAA5B","sourcesContent":["import React, { Component } from \"react\"\nimport posed from 'react-pose';\nimport \"./NewRequest.css\"\nimport \"./store.css\"\nimport { Auth } from \"aws-amplify\"\nimport { connect } from \"react-redux\"\nimport { makeGetRequest, makePostRequest } from \"../api_calls\"\n\nclass NewRequest extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            request: '',\n            tags: [\n                'vintage',\n                'second hand'\n            ]\n        }\n    }\n\n    makeRequest = () => {\n        console.log('making request')\n        makePostRequest('make-request', this.state,\n            (data) => {\n                console.log('request made')\n                console.log(data)\n            }\n        )\n        // Auth.currentSession()\n        // .then(\n        //     data => {\n        //         var IDToken = data.getIdToken().getJwtToken()\n        //         var options = {\n        //             method: 'POST',\n        //             mode: 'cors',\n        //             body: JSON.stringify(this.state),\n        //             headers: {\n        //                 \"Authorization\": IDToken,\n        //                 'Content-Type': 'application/json'\n        //             }\n        //         }\n        //         fetch(\"https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/make-request\", options)\n        //         .then(\n        //             makeGetRequest('get-my-requests', \n        //                 (requests) => {\n        //                     requests = JSON.parse(requests.body)\n        //                     this.props.setRequests(requests)\n        //                     this.props.history.push('/app/home/requests')\n        //                     window.analytics.track('Request made')\n        //                     //return <Redirect to=\"/profile\" />         // not\n        //                 }\n        //             )\n        //         )\n        //     },\n        //     err => {\n        //         console.log('AN ERROR OCCURED WHILST GETTING THE SESSION')\n        //         console.log(err)\n        //     }\n        // )\n        // .catch(\n        //     (err) => {console.log(err)}\n        // )\n    }\n\n    handleChange = (e) => {\n        this.setState({[e.target.id]: e.target.value}, \n            () => {\n                console.log(this.state)\n            })\n    }\n\n    render() {\n        return (\n            <>\n                <div className=\"field-container long-field-title\">\n                    <div className=\"field-title\" style={{fontFamily: 'var(--font1)'}}>\n                        Describe your style and what you're looking for\n                    </div>\n                    <textarea className=\"text-response\" id=\"request\" placeholder=\"I'm looking for...\" onChange={this.handleChange} value={this.state.request}/>\n                </div>\n                {/* <div className=\"grid-response\">\n                    <button className=\"btn\">\n                        <label for=\"vintage\" >\n                            yo\n                        </label>\n                    </button>\n                </div> */}\n                <button onClick={this.state.request == '' ? this.props.not_now : () => {this.makeRequest(); this.props.onSubmit()}} >\n                    {this.state.request == '' ? 'Nothing right now' : 'Submit'}\n                </button>\n            </>\n        )\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setRequests: () => {\n            console.log('settign requests')\n             makeGetRequest('get-my-requests', data => {\n                data = JSON.parse(data.body)\n                console.log(data)\n                dispatch({type: \"SET_REQUESTS\", requests: data})\n                console.log('set requests')\n            })\n        }\n    }\n}\n\nexport default NewRequest = connect(null, mapDispatchToProps)(NewRequest)"]},"metadata":{},"sourceType":"module"}