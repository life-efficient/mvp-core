{"ast":null,"code":"import _defineProperty from \"/home/ice/test/test/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ice/test/test/src/adminComponents/Orders.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { makeGetRequest, makePostRequest } from \"../api_calls\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Navbar from \"./Navbar\";\nimport Section from \"../components/Section\";\nimport \"./Orders.css\";\nimport { userInfo } from \"os\";\nimport Loading from \"../general/Loading\";\nimport Tabs from \"../components/Tabs\";\nimport box from \"../images/icons/box.png\";\nimport upArrow from \"../images/icons/upArrow.png\";\nimport downArrow from \"../images/icons/downArrow.png\";\nimport writing from \"../images/icons/writing.png\";\nimport delivery from \"../images/icons/delivery.png\";\nimport { Route } from \"react-router-dom\";\nimport Dropdown from \"../components/form_components/Dropdown\";\n\nclass Group extends Component {\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }, this.props.title), this.props.items ? this.props.items : React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass ItemGroups extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getOrders = () => {\n      makeGetRequest('admin-orders', products => {\n        products = JSON.parse(products.body);\n        console.log('ORDERS:', products);\n        products = products.map(p => {\n          var brand = p.brand;\n          brand = brand.toLowerCase();\n          brand = brand.replace('_', ' ');\n          p.brand = brand;\n          return p;\n        });\n        this.statuses = ['needs ordering', 'ordered', 'arrived', 'needs delivering', 'delivered', 'needs picking up', 'needs returning'];\n        var orders = products.filter(p => {\n          if (p.name == 'Test') {\n            console.log('GOT TEST');\n          }\n\n          return p.status == 'needs ordering';\n        });\n        var arriving = products.filter(p => {\n          return p.status == 'ordered';\n        });\n        var boxes = products.filter(p => {\n          return p.status == 'arrived';\n        });\n        var deliveries = products.filter(p => {\n          return p.status == 'needs delivering' || p.status == 'delivered' || p.status == 'needs picking up';\n        });\n        var returns = products.filter(p => {\n          return p.status == 'needs returning';\n        });\n        var other = products.filter(p => {\n          return ![...orders, ...arriving, ...boxes, ...returns].includes(p);\n        });\n        console.log('DELIVERIES:', deliveries);\n        this.setState({\n          orders,\n          arriving,\n          boxes,\n          deliveries,\n          returns // other\n\n        });\n      });\n    };\n\n    this.reduceItemsToGroups = (stage, items) => {\n      switch (stage) {\n        case \"orders\":\n        case \"returns\":\n        case \"arriving\":\n          // reduce items into their respective brands\n          var site;\n          var siteList;\n          var sites = items.reduce( // reduce list of all orders into dict of products from particular sites\n          (siteMap, item) => {\n            // console.log(siteMap)\n            site = item.url ? item.url : item.product_url;\n            site = site.split('/')[2]; //.replace('www.', '')\n            // console.log(site)\n\n            siteList = siteMap[site] ? siteMap[site] : [];\n            siteList.push(item);\n            siteMap[site] = siteList;\n            return siteMap;\n          }, {});\n          return sites;\n\n        case \"boxes\":\n        case \"deliveries\":\n          // reduce items into boxes\n          var user;\n          var userList;\n          var users = items.reduce((userMap, item) => {\n            user = item.user_id;\n            userList = userMap[user] ? userMap[user] : [];\n            userList.push(item);\n            userMap[user] = userList;\n            return userMap;\n          }, {});\n          return users;\n      }\n    };\n\n    this.formatToSection = (name, groups) => {\n      var ordered = {};\n      var dates = []; // console.log(name, groups)\n\n      Object.keys(groups).sort( // sort stores by oldest date\n      (s1, s2) => {\n        console.log('site 1:', s1);\n        var s1_date = new Date(Math.min.apply(null, groups[s1].map(o => new Date(o.timestamp))));\n        var s2_date = new Date(Math.min.apply(null, groups[s2].map(o => new Date(o.timestamp))));\n        var diff = s1_date - s2_date;\n        console.log(diff);\n        return diff;\n      }).forEach( // list oldest date of each item in this group\n      key => {\n        ordered[key] = groups[key];\n        var time_ago = new Date() - new Date(Math.min.apply(null, groups[key].map(o => new Date(o.timestamp))));\n        console.log(time_ago);\n        var days_ago = Math.round(time_ago / (1000 * 24 * 60 * 60));\n        dates.push(days_ago);\n      }); // console.log(ordered)\n\n      switch (name) {\n        case \"orders\": // Fallthrough  (do same code for orders and returns)\n\n        case \"arriving\":\n        case \"returns\":\n          return Object.keys(ordered).map( // map \n          (key, idx) => {\n            var orders = groups[key]; // console.log(dates[idx])\n\n            return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n              className: \"orders-brand section\",\n              passthrough: orders,\n              title: key,\n              caption: \"\".concat(orders.length, \" items\"),\n              onClick: () => {\n                this.props.openSlideUp( // slideup content\n                React.createElement(React.Fragment, null, React.createElement(\"div\", {\n                  className: \"medium\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 206\n                  },\n                  __self: this\n                }, \"Products from \", key), orders.map(order => {\n                  console.log('ORDER:', order);\n                  return React.createElement(SlideUpItem, {\n                    type: name,\n                    order: order,\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 214\n                    },\n                    __self: this\n                  });\n                })));\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 202\n              },\n              __self: this\n            }, React.createElement(\"div\", {\n              className: \"medium\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 221\n              },\n              __self: this\n            }, key), React.createElement(\"div\", {\n              className: \"small\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 222\n              },\n              __self: this\n            }, orders.length, \" \", orders.length == 1 ? 'item' : 'items'), React.createElement(\"div\", {\n              className: \"small\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 225\n              },\n              __self: this\n            }, \"Ordered \", dates[idx].toString(), \" days ago\")));\n          });\n\n        case \"boxes\":\n          return Object.keys(ordered).map((key, idx) => {\n            var orders = groups[key];\n            var total_num_orders = [...this.state.orders, ...this.state.arriving, ...this.state.boxes].filter(o => {\n              return o.user_id == key;\n            }).length;\n            return React.createElement(BoxGroup, {\n              name: groups[key][0].name,\n              instagram: groups[key][0].instagram,\n              all_products: orders,\n              oldest_date: dates[idx],\n              openSlideUp: this.props.openSlideUp,\n              total_num_orders: total_num_orders,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 240\n              },\n              __self: this\n            });\n          });\n\n        case \"deliveries\":\n          var needs_delivering;\n          var delivered;\n          var needs_picking_up;\n          return Object.keys(ordered).map((key, idx) => {\n            var deliveries = groups[key];\n            return React.createElement(DeliveryGroup, {\n              name: groups[key][0].name,\n              instagram: groups[key][0].instagram,\n              all_products: deliveries,\n              oldest_date: dates[idx],\n              openSlideUp: this.props.openSlideUp,\n              openModal: this.props.openModal,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 253\n              },\n              __self: this\n            });\n          });\n      }\n    };\n\n    this.state = {\n      orders: null,\n      arriving: null,\n      boxes: null,\n      deliveries: null,\n      returns: null // other: null,\n      // active: 'orders'\n\n    };\n    this.getOrders();\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, window.location.pathname == '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders' ? React.createElement(Redirect, {\n      to: \"/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/orders\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }) : null, React.createElement(Navbar, {\n      back: true,\n      back_to: \"/5015db37-0d03-4f44-93a5-606ac215935b/admin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"body\",\n      style: {\n        backgroundColor: 'var(--green)',\n        marginBottom: '8vh'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, Object.keys(this.state).map(stage => {\n      console.log('title:', stage);\n      console.log(this.state[stage]);\n      return React.createElement(Route, {\n        path: \"/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/\".concat(stage),\n        render: () => {\n          return React.createElement(Group, {\n            title: stage,\n            items: this.state[stage] ? this.formatToSection(stage, this.reduceItemsToGroups(stage, this.state[stage])) : null,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 277\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      });\n    })), React.createElement(Tabs, {\n      tabs: [{\n        name: 'orders',\n        icon: downArrow,\n        to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/orders'\n      }, {\n        name: 'arriving',\n        icon: writing,\n        to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/arriving'\n      }, {\n        name: 'boxes',\n        icon: box,\n        to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/boxes'\n      }, {\n        name: 'deliveries',\n        icon: delivery,\n        to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/deliveries'\n      }, {\n        name: 'returns',\n        icon: upArrow,\n        to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/returns'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass SlideUpItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.update = e => {\n      if (this.state.status) {\n        return null;\n      }\n\n      this.setState({\n        loading: true\n      });\n      var action = this.map[this.props.type].action;\n      console.log('updating status to:', action); // console.log(this.state)\n\n      if (this.props.order.status != this.map[this.props.type].prev_action) {\n        // must have the previous action in the process\n        return null;\n      }\n\n      makePostRequest('update-recommendation', _objectSpread({}, this.props.order, {\n        action\n      }), () => {\n        console.log('item ordered');\n        this.setState({\n          status: 'Nice work!',\n          loading: false\n        });\n      });\n    };\n\n    this.getContent = () => {\n      var order = this.props.order;\n\n      switch (this.props.type) {\n        case \"orders\":\n          return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 377\n            },\n            __self: this\n          }, \"Should cost less than \", order.currency, order.price), React.createElement(\"button\", {\n            className: \"btn\",\n            onClick: this.update,\n            style: {\n              backgroundColor: 'var(--red)'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 380\n            },\n            __self: this\n          }, this.state.loading ? React.createElement(Loading, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 383\n            },\n            __self: this\n          }) : this.state.status ? this.state.status : \"It's ordered\"));\n\n        case \"arriving\":\n          return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n            className: \"btn\",\n            onClick: this.update,\n            style: {\n              backgroundColor: 'var(--red)'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 396\n            },\n            __self: this\n          }, this.state.loading ? React.createElement(Loading, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 399\n            },\n            __self: this\n          }) : this.state.status ? this.state.status : \"It's arrived!\"));\n\n        case \"returns\":\n          return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n            className: \"btn\",\n            onClick: this.update,\n            style: {\n              backgroundColor: 'var(--red)'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 412\n            },\n            __self: this\n          }, this.state.loading ? React.createElement(Loading, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 415\n            },\n            __self: this\n          }) : this.state.status ? this.state.status : \"It's been returned!\"));\n\n        case \"boxes\":\n        case \"delivery\":\n          return null;\n      }\n    };\n\n    this.state = {\n      status: null,\n      loading: false\n    };\n    this.map = {\n      \"orders\": {\n        action: \"ordered\",\n        prev_action: \"needs ordering\"\n      },\n      \"arriving\": {\n        action: \"arrived\",\n        prev_action: \"ordered\"\n      },\n      \"boxes\": {\n        action: \"needs delivering\",\n        prev_action: \"arrived\"\n      },\n      \"deliveries\": {\n        action: \"delivered\",\n        prev_action: \"needs delivering\"\n      },\n      \"returns\": {\n        action: \"returned\",\n        prev_action: \"needs returning\"\n      }\n    };\n  }\n\n  render() {\n    var order = this.props.order;\n    var link = this.props.order.product_url ? this.props.order.product_url : this.props.order.url;\n    console.log('ORDERS:', order);\n    return React.createElement(\"div\", {\n      className: \"order-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: order.img_urls[0],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"small order-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439\n      },\n      __self: this\n    }, order.name), React.createElement(\"div\", {\n      onClick: () => {\n        window.open(\"/5015db37-0d03-4f44-93a5-606ac215935b/admin/user?sub=\".concat(order.user_id));\n      },\n      style: {\n        cursor: 'pointer',\n        textDecoration: 'underline'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442\n      },\n      __self: this\n    }, \"See user details\"), React.createElement(\"div\", {\n      onClick: () => {\n        window.open(link);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }, \"                           \", link), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448\n      },\n      __self: this\n    }, \"Ordered on: \", order.timestamp), this.getContent()));\n  }\n\n}\n\nclass BoxGroup extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateAll = e => {\n      e.stopPropagation();\n      this.setState({\n        loading: true\n      });\n      var action = 'needs delivering';\n      this.props.all_products.map((p, idx) => {\n        console.log('updating status to:', action); // console.log(this.state)\n\n        if (p.status != 'arrived') {\n          // must have the previous action in the process\n          alert(\"product \".concat(idx, \" has not arrived\"));\n          return null;\n        }\n\n        makePostRequest('update-recommendation', _objectSpread({}, p, {\n          action\n        }), () => {\n          console.log('item status set to needs delivering');\n          this.setState({\n            status: \"Great work\",\n            loading: false\n          });\n        });\n      });\n    };\n\n    this.state = {\n      loading: false\n    };\n  }\n\n  render() {\n    var orders = this.props.all_products;\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"orders-brand section\",\n      onClick: () => {\n        this.props.openSlideUp( // slideup content\n        React.createElement(React.Fragment, null, React.createElement(\"div\", {\n          className: \"medium\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 502\n          },\n          __self: this\n        }, \"Box for \", this.props.name), React.createElement(\"div\", {\n          className: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 505\n          },\n          __self: this\n        }, \"(\", this.props.instagram, \")\"), orders.map(order => {\n          console.log('ORDER:', order);\n          return React.createElement(SlideUpItem, {\n            type: 'boxes',\n            order: order,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 511\n            },\n            __self: this\n          });\n        })));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518\n      },\n      __self: this\n    }, orders[0].name), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519\n      },\n      __self: this\n    }, \"(\", this.props.instagram, \")\"), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520\n      },\n      __self: this\n    }, orders.length, \" \", orders.length == 1 ? 'item' : 'items'), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523\n      },\n      __self: this\n    }, \"Ordered \", this.props.oldest_date.toString(), \" days ago\"), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526\n      },\n      __self: this\n    }, this.props.all_products.length, \"/\", this.props.total_num_orders, \" ordered items currently in box\"), React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: this.updateAll,\n      style: {\n        backgroundColor: 'var(--red)',\n        marginLeft: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534\n      },\n      __self: this\n    }) : this.state.status ? this.state.status : \"Set for delivery!\")));\n  }\n\n}\n\nclass DeliveryGroup extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateAll = e => {\n      e.stopPropagation();\n      this.setState({\n        loading: true\n      });\n      var action = '';\n      console.log(this.props.all_products); // this.props.all_products.map(\n      //     (p, idx) => {\n      //         console.log(p)\n      //         console.log('updating status to:', action)\n      //         // console.log(this.state)\n      //         if (p.status != 'needs delivering') {     // must have the previous action in the process\n      //             alert(`product ${idx} has not arrived`)\n      //             return null\n      //         }\n      //         makePostRequest('update-recommendation', {...p, action},\n      //             () => {\n      //                 console.log('item status set to needs delivering')\n      //                 this.setState({\n      //                     status: \"Great work\",\n      //                     loading: false\n      //                 })\n      //             }\n      //         )\n      //     }\n      // )\n    };\n\n    this.getCaption = () => {\n      switch (\"needs delivering\") {\n        case \"needs delivering\":\n          return 'yo caption';\n      }\n    };\n\n    this.handleOptionChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      }, () => {\n        console.log(this.state);\n      });\n    };\n\n    this.getDeliveryForm = () => {\n      return React.createElement(\"div\", {\n        className: \"form-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 603\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"field-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"field-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605\n        },\n        __self: this\n      }, \"Date\"), React.createElement(Dropdown, {\n        options: [...Array(31).keys()].map(i => {\n          return i + 1;\n        }),\n        prompt: \"select date\",\n        value: this.state.delivery_date,\n        onChange: this.handleOptionChange,\n        name: \"delivery_date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"field-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"field-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 611\n        },\n        __self: this\n      }, \"Time\"), React.createElement(Dropdown, {\n        options: [...[...Array(12).keys()].map(i => {\n          return (i + 8 < 10 ? '0' : '') + (i + 8) + '00';\n        })],\n        prompt: \"select time\",\n        value: this.state.delivery_time,\n        onChange: this.handleOptionChange,\n        name: \"delivery_time\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        onClick: this.updateAll,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 616\n        },\n        __self: this\n      }, \"Set for delivery!\"));\n    };\n\n    this.state = {\n      loading: false,\n      delivery_date: null,\n      delivery_time: null\n    };\n  }\n\n  render() {\n    var orders = this.props.all_products;\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"orders-brand section\",\n      passthrough: orders,\n      caption: \"\".concat(orders.length, \" items\"),\n      onClick: () => {\n        this.props.openSlideUp( // slideup content\n        React.createElement(React.Fragment, null, React.createElement(\"div\", {\n          className: \"medium\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 629\n          },\n          __self: this\n        }, \"Box for \", this.props.name, \" (\", this.props.instagram, \")\"), orders.map(order => {\n          console.log('ORDER:', order);\n          return React.createElement(SlideUpItem, {\n            type: 'boxes',\n            order: order,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 637\n            },\n            __self: this\n          });\n        })));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 644\n      },\n      __self: this\n    }, orders[0].name), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 645\n      },\n      __self: this\n    }, \"(\", this.props.instagram, \")\"), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 646\n      },\n      __self: this\n    }, orders.length, \" \", orders.length == 1 ? 'item' : 'items'), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 649\n      },\n      __self: this\n    }, \"Ordered \", this.props.oldest_date.toString(), \" days ago\"), React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: e => {\n        e.stopPropagation();\n        this.props.openModal(this.getDeliveryForm());\n      },\n      style: {\n        backgroundColor: 'var(--red)',\n        marginLeft: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 652\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 655\n      },\n      __self: this\n    }) : this.state.status ? this.state.status : \"Mark as delivered!\")));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    openSlideUp: content => {\n      dispatch({\n        type: \"OPEN_SLIDEUP\",\n        content\n      });\n    },\n    openModal: content => {\n      dispatch({\n        type: \"OPEN_MODAL\",\n        content\n      });\n    },\n    closeModal: () => {\n      dispatch({\n        type: \"CLOSE_MODAL\"\n      });\n    }\n  };\n};\n\nexport default ItemGroups = connect(null, mapDispatchToProps)(ItemGroups);","map":{"version":3,"sources":["/home/ice/test/test/src/adminComponents/Orders.js"],"names":["React","Component","makeGetRequest","makePostRequest","Redirect","connect","Navbar","Section","userInfo","Loading","Tabs","box","upArrow","downArrow","writing","delivery","Route","Dropdown","Group","render","props","title","items","ItemGroups","constructor","getOrders","products","JSON","parse","body","console","log","map","p","brand","toLowerCase","replace","statuses","orders","filter","name","status","arriving","boxes","deliveries","returns","other","includes","setState","reduceItemsToGroups","stage","site","siteList","sites","reduce","siteMap","item","url","product_url","split","push","user","userList","users","userMap","user_id","formatToSection","groups","ordered","dates","Object","keys","sort","s1","s2","s1_date","Date","Math","min","apply","o","timestamp","s2_date","diff","forEach","key","time_ago","days_ago","round","idx","length","openSlideUp","order","toString","total_num_orders","state","instagram","needs_delivering","delivered","needs_picking_up","openModal","window","location","pathname","backgroundColor","marginBottom","icon","to","SlideUpItem","update","e","loading","action","type","prev_action","getContent","currency","price","link","img_urls","open","cursor","textDecoration","BoxGroup","updateAll","stopPropagation","all_products","alert","oldest_date","marginLeft","DeliveryGroup","getCaption","handleOptionChange","target","value","getDeliveryForm","Array","i","delivery_date","delivery_time","mapDispatchToProps","dispatch","content","closeModal"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport { makeGetRequest, makePostRequest } from \"../api_calls\";\nimport { Redirect } from \"react-router-dom\"\nimport { connect } from \"react-redux\"\nimport Navbar from \"./Navbar\"\nimport Section from \"../components/Section\"\nimport \"./Orders.css\"\nimport { userInfo } from \"os\";\nimport Loading from \"../general/Loading\";\nimport Tabs from \"../components/Tabs\"\nimport box from \"../images/icons/box.png\"\nimport upArrow from \"../images/icons/upArrow.png\"\nimport downArrow from \"../images/icons/downArrow.png\"\nimport writing from \"../images/icons/writing.png\"\nimport delivery from \"../images/icons/delivery.png\"\n\nimport { Route } from \"react-router-dom\"\nimport Dropdown from \"../components/form_components/Dropdown\";\n\nclass Group extends Component {\n\n    render() {\n        return(\n            <>\n                <div className=\"medium\">\n                    {this.props.title}\n                </div>\n                {\n                    this.props.items ?\n                    this.props.items\n                    :\n                    <Loading />\n                }\n            </>\n        )\n    }\n}\n\nclass ItemGroups extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            orders: null,\n            arriving: null,\n            boxes: null,\n            deliveries: null,\n            returns: null,\n            // other: null,\n            // active: 'orders'\n        }\n        this.getOrders()\n    }\n\n    getOrders = () => {\n        makeGetRequest('admin-orders',\n            (products) => {\n                products = JSON.parse(products.body)\n\n                console.log('ORDERS:', products)\n                products = products.map(\n                    (p) => {\n                        var brand = p.brand\n                        brand = brand.toLowerCase()\n                        brand = brand.replace('_', ' ')\n                        p.brand = brand\n                        return p\n                    }\n                )\n\n                this.statuses = ['needs ordering', 'ordered', 'arrived', 'needs delivering', 'delivered', 'needs picking up', 'needs returning']\n\n                var orders = products.filter(\n                    (p) => {\n                        if (p.name == 'Test') {\n                            console.log('GOT TEST')\n                        } \n                        return p.status == 'needs ordering'\n                    }\n                )\n\n                var arriving = products.filter(\n                    (p) => {\n                        return p.status == 'ordered'\n                    }\n                )\n\n                var boxes = products.filter(\n                    (p) => {\n                        return p.status == 'arrived'\n                    }\n                )\n\n                var deliveries = products.filter(\n                    (p) => {\n                        return p.status == 'needs delivering' || p.status == 'delivered' || p.status == 'needs picking up'\n                    }\n                )\n\n                var returns = products.filter(\n                    (p) => {\n                        return p.status == 'needs returning'\n                    }\n                )\n\n                var other = products.filter(\n                    (p) => {\n                        return ![...orders, ...arriving, ...boxes, ...returns].includes(p)\n                    }\n                )\n\n                console.log('DELIVERIES:', deliveries)\n\n                this.setState({\n                    orders,\n                    arriving,\n                    boxes,\n                    deliveries,\n                    returns,\n                    // other\n                })\n            }\n        )\n    }\n\n    reduceItemsToGroups = (stage, items) => {\n        switch (stage) {\n            case \"orders\":\n            case \"returns\":\n            case \"arriving\":\n                // reduce items into their respective brands\n                var site\n                var siteList\n                var sites = items.reduce(        // reduce list of all orders into dict of products from particular sites\n                    (siteMap, item) => {\n                        // console.log(siteMap)\n                        site = item.url ? item.url : item.product_url\n                        site = site.split('/')[2]//.replace('www.', '')\n                        // console.log(site)\n                        siteList = siteMap[site] ? siteMap[site] : []\n                        siteList.push(item)\n                        siteMap[site] = siteList\n                        return siteMap\n                    },\n                    {}\n                )\n                return sites\n            case \"boxes\":\n            case \"deliveries\":\n                // reduce items into boxes\n                var user\n                var userList\n                var users = items.reduce(\n                    (userMap, item) => {\n                        user = item.user_id\n                        userList = userMap[user] ? userMap[user] : []\n                        userList.push(item)\n                        userMap[user] = userList\n                        return userMap\n                    }\n                    ,\n                    {}\n                )\n                return users\n        }\n    }\n\n    formatToSection = (name, groups) => {\n        var ordered = {}\n        var dates = []\n        // console.log(name, groups)\n        Object.keys(groups).sort(        // sort stores by oldest date\n            (s1, s2) => {\n                console.log('site 1:', s1)\n                var s1_date =new Date(Math.min.apply(null, groups[s1].map((o) => new Date(o.timestamp))));\n                var s2_date =new Date(Math.min.apply(null, groups[s2].map((o) => new Date(o.timestamp))));\n                var diff = s1_date - s2_date\n                console.log(diff)\n                return diff\n            }\n        )\n        .forEach(                       // list oldest date of each item in this group\n            (key) => {\n                ordered[key] = groups[key]\n                var time_ago = new Date() - new Date(Math.min.apply(null, groups[key].map((o) => new Date(o.timestamp))))\n                console.log(time_ago)\n                var days_ago = Math.round(time_ago / (1000 * 24 * 60 * 60)) \n                dates.push(days_ago)\n            }\n        )\n        // console.log(ordered)\n        switch(name) {\n            case \"orders\":  // Fallthrough  (do same code for orders and returns)\n            case \"arriving\":\n            case \"returns\":\n                return Object.keys(ordered)\n                .map(                               // map \n                    (key, idx) => {\n                        var orders = groups[key]\n                        // console.log(dates[idx])\n                        return (\n                            <>\n                                <div className=\"orders-brand section\" passthrough={orders} title={key} caption={`${orders.length} items`} \n                                    onClick={() => {this.props.openSlideUp(\n                                        // slideup content\n                                        <>\n                                            <div className=\"medium\">\n                                                Products from {key}\n                                            </div>\n                                            {\n                                                orders.map(\n                                                    (order) => {\n                                                        console.log('ORDER:', order)\n                                                        return (\n                                                            <SlideUpItem type={name} order={order} />\n                                                        )\n                                                    }\n                                                )\n                                            }\n                                        </>\n                                    )}}>\n                                        <div className=\"medium\" >{key}</div>\n                                        <div className=\"small\">\n                                            {orders.length} {orders.length == 1 ? 'item' : 'items'}\n                                        </div>\n                                        <div className=\"small\">\n                                            Ordered {dates[idx].toString()} days ago\n                                        </div>\n                                </div>\n                            </>\n                        )\n                    }\n                )\n            case \"boxes\":\n                 return Object.keys(ordered)\n                 .map(\n                     (key, idx) => {\n                        var orders = groups[key]\n                        var total_num_orders = [...this.state.orders, ...this.state.arriving, ...this.state.boxes].filter((o) => {return o.user_id == key}).length\n                        return (\n                            <BoxGroup name={groups[key][0].name} instagram={groups[key][0].instagram} all_products={orders} oldest_date={dates[idx]} openSlideUp={this.props.openSlideUp} total_num_orders={total_num_orders} />\n                        )\n                     }\n                 )\n            case \"deliveries\":\n                var needs_delivering\n                var delivered\n                var needs_picking_up\n                return Object.keys(ordered)\n                .map(\n                    (key, idx) => {\n                        var deliveries = groups[key]\n                        return (\n                            <DeliveryGroup name={groups[key][0].name} instagram={groups[key][0].instagram} all_products={deliveries} oldest_date={dates[idx]} openSlideUp={this.props.openSlideUp} openModal={this.props.openModal}  />\n                        )\n                    }\n                )\n            \n        }\n    }\n\n    render() {\n        return (\n            <>  \n                {\n                    window.location.pathname == '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders' ?\n                    <Redirect to='/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/orders' />\n                    :\n                    null\n                }\n                <Navbar back={true} back_to=\"/5015db37-0d03-4f44-93a5-606ac215935b/admin\" />\n                <div className=\"body\" style={{backgroundColor: 'var(--green)', marginBottom: '8vh'}}>\n                    {\n                        Object.keys(this.state).map(\n                            (stage) => {\n                                console.log('title:', stage)\n                                console.log(this.state[stage])\n                                return <Route path={`/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/${stage}`} render={() =>{return <Group title={stage} items={ this.state[stage] ? this.formatToSection(stage, this.reduceItemsToGroups(stage, this.state[stage])) : null} />}} />\n                            }\n                        )\n                    }\n                    {/* <Route path=\"/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/boxes\" render={() =>{return <Group title='Boxes' items={ this.state.boxes ? this.formatToSection('boxes', this.reduceItemsToUser(this.state.boxes)) : null} openSlideUp={this.props.openSlideUp} />}} />\n                    <Route path=\"/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/returns\" render={() =>{return <Group title='Returns' items={ this.state.returns ? this.formatToSection('returns', this.reduceItemsToSites(this.state.returns)) : null} openSlideUp={this.props.openSlideUp} />}} /> */}\n                </div>\n                <Tabs \n                    tabs={[\n                        {\n                            name: 'orders',\n                            icon: downArrow,\n                            to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/orders'\n                        },\n                        {\n                            name: 'arriving',\n                            icon: writing,\n                            to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/arriving'\n                        },\n                        {\n                            name: 'boxes',\n                            icon: box,\n                            to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/boxes'\n                        },\n                        {\n                            name: 'deliveries',\n                            icon: delivery,\n                            to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/deliveries'\n                        },\n                        {\n                            name: 'returns',\n                            icon: upArrow,\n                            to: '/5015db37-0d03-4f44-93a5-606ac215935b/admin/orders/returns'\n                        }\n                    ]}\n                />\n            </>\n        )\n    }\n}\n\nclass SlideUpItem extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            status: null,\n            loading: false\n        }\n        this.map = {\n            \"orders\": {\n                action: \"ordered\",\n                prev_action: \"needs ordering\"\n            },\n            \"arriving\": {\n                action: \"arrived\",\n                prev_action: \"ordered\"\n            },\n            \"boxes\": {\n                action: \"needs delivering\",\n                prev_action: \"arrived\"\n            },\n            \"deliveries\": {\n                action: \"delivered\",\n                prev_action: \"needs delivering\"\n            },\n            \"returns\": {\n                action: \"returned\",\n                prev_action: \"needs returning\"\n            }\n        }\n    }\n\n    update = (e) => {\n        if (this.state.status) {\n            return null\n        }\n        this.setState({loading: true})\n        var action = this.map[this.props.type].action\n        console.log('updating status to:', action)\n        // console.log(this.state)\n        if (this.props.order.status != this.map[this.props.type].prev_action) {     // must have the previous action in the process\n            return null\n        }\n        makePostRequest('update-recommendation', {...this.props.order, action},\n            () => {\n                console.log('item ordered')\n                this.setState({\n                    status: 'Nice work!',\n                    loading: false\n                })\n            }\n        )\n    }\n\n    getContent = () => {\n        var order = this.props.order\n        switch (this.props.type) {\n            case \"orders\":\n                return (\n                    <>\n                        <div>\n                            Should cost less than {order.currency}{order.price}\n                        </div>\n                        <button className=\"btn\" onClick={this.update} style={{backgroundColor: 'var(--red)'}}>\n                            {\n                                this.state.loading ?\n                                <Loading />\n                                :\n                                this.state.status ?\n                                this.state.status\n                                :\n                                \"It's ordered\"\n                            }\n                        </button>\n                    </>\n                )\n            case \"arriving\":\n                return (\n                    <>\n                        <button className=\"btn\" onClick={this.update} style={{backgroundColor: 'var(--red)'}}>\n                            {\n                                this.state.loading ?\n                                <Loading />\n                                :\n                                this.state.status ?\n                                this.state.status\n                                :\n                                \"It's arrived!\"\n                            }\n                        </button>\n                    </>\n                )\n            case \"returns\":\n                return (\n                    <>\n                        <button className=\"btn\" onClick={this.update} style={{backgroundColor: 'var(--red)'}}>\n                            {\n                                this.state.loading ?\n                                <Loading />\n                                :\n                                this.state.status ?\n                                this.state.status\n                                :\n                                \"It's been returned!\"\n                            }\n                        </button>\n                    </>\n                )\n            case \"boxes\":\n            case \"delivery\":\n                return null\n        }\n    }\n\n    render() {\n        var order = this.props.order\n        var link = this.props.order.product_url ? this.props.order.product_url : this.props.order.url\n        console.log('ORDERS:', order)\n        return (\n            <div className=\"order-item\">\n                <img src={order.img_urls[0]} />\n                <div className=\"small order-content\">\n                    <div className=\"medium\">\n                        {order.name}\n                    </div>\n                    <div onClick={() => {window.open(`/5015db37-0d03-4f44-93a5-606ac215935b/admin/user?sub=${order.user_id}`)}} style={{cursor: 'pointer', textDecoration: 'underline'}}>\n                        See user details\n                    </div>\n                    <div onClick={() => {window.open(link)}} style={{cursor: 'pointer'}}>                           {/* link to product */}\n                        {link}\n                    </div>\n                    <div>\n                        Ordered on: {order.timestamp}\n                    </div>\n                    {this.getContent()}\n                </div>\n            </div>\n        )\n    \n    }\n}\n\n\nclass BoxGroup extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            loading: false\n        }\n\n    }\n\n    updateAll = (e) => {\n        e.stopPropagation()\n        this.setState({loading: true})\n        var action = 'needs delivering'\n        this.props.all_products.map(\n            (p, idx) => {\n                console.log('updating status to:', action)\n                // console.log(this.state)\n                if (p.status != 'arrived') {     // must have the previous action in the process\n                    alert(`product ${idx} has not arrived`)\n                    return null\n                }\n                makePostRequest('update-recommendation', {...p, action},\n                    () => {\n                        console.log('item status set to needs delivering')\n                        this.setState({\n                            status: \"Great work\",\n                            loading: false\n                        })\n                    }\n                )\n            }\n        )\n    }\n\n    render(){\n        var orders = this.props.all_products\n        return (\n            <>\n                <div className=\"orders-brand section\"  \n                    onClick={() => {this.props.openSlideUp(\n                        // slideup content\n                        <>\n                            <div className=\"medium\">\n                                Box for {this.props.name}\n                            </div>\n                            <div className=\"small\">({this.props.instagram})</div>\n                            {\n                                orders.map(\n                                    (order) => {\n                                        console.log('ORDER:', order)\n                                        return (\n                                            <SlideUpItem type={'boxes'} order={order} />\n                                        )\n                                    }\n                                )\n                            }\n                        </>\n                    )}}>\n                        <div className=\"medium\" >{orders[0].name}</div>\n                        <div className=\"small\">({this.props.instagram})</div>\n                        <div className=\"small\">\n                            {orders.length} {orders.length == 1 ? 'item' : 'items'}\n                        </div>\n                        <div className=\"small\">\n                            Ordered {this.props.oldest_date.toString()} days ago\n                        </div>\n                        <div className=\"small\">\n                            {this.props.all_products.length}\n                            /\n                            {this.props.total_num_orders} ordered items currently in box\n                        </div>\n                        <button className=\"btn\" onClick={this.updateAll} style={{backgroundColor: 'var(--red)', marginLeft: '10px'}}>\n                            {\n                                this.state.loading ?\n                                <Loading />\n                                :\n                                this.state.status ?\n                                this.state.status\n                                :\n                                \"Set for delivery!\"\n                            }\n                        </button>\n                </div>\n            </>\n\n        )\n    }\n}\n\nclass DeliveryGroup extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            loading: false,\n            delivery_date: null,\n            delivery_time: null\n        }\n    }\n\n    updateAll = (e) => {\n        e.stopPropagation()\n        this.setState({loading: true})\n        var action = ''\n        console.log(this.props.all_products)\n        // this.props.all_products.map(\n        //     (p, idx) => {\n        //         console.log(p)\n        //         console.log('updating status to:', action)\n        //         // console.log(this.state)\n        //         if (p.status != 'needs delivering') {     // must have the previous action in the process\n        //             alert(`product ${idx} has not arrived`)\n        //             return null\n        //         }\n        //         makePostRequest('update-recommendation', {...p, action},\n        //             () => {\n        //                 console.log('item status set to needs delivering')\n        //                 this.setState({\n        //                     status: \"Great work\",\n        //                     loading: false\n        //                 })\n        //             }\n        //         )\n        //     }\n        // )\n    }\n\n    getCaption = () => {\n        switch(\"needs delivering\") {\n            case \"needs delivering\":\n                return 'yo caption'\n        }\n    }\n\n    handleOptionChange = (e) => {\n        this.setState({[e.target.name]: e.target.value},\n            () => {\n                console.log(this.state)\n            }\n        )\n    }\n\n    getDeliveryForm = () => {\n        return (\n            <div className=\"form-container\">\n                <div className=\"field-container\">\n                    <div className=\"field-title\">\n                        Date\n                    </div>\n                    <Dropdown options={[...Array(31).keys()].map((i)=>{return i+1})} prompt=\"select date\" value={this.state.delivery_date} onChange={this.handleOptionChange} name=\"delivery_date\" />\n                </div>\n                <div className=\"field-container\">\n                    <div className=\"field-title\">\n                        Time\n                    </div>\n                    <Dropdown options={[...[...Array(12).keys()].map((i)=>{return (i+8<10 ? '0' : '') + (i+8) + '00'})]} prompt=\"select time\" value={this.state.delivery_time} onChange={this.handleOptionChange} name=\"delivery_time\" />\n                </div>\n                <button onClick={this.updateAll}>Set for delivery!</button>\n            </div>\n        )\n    }\n\n    render() {\n        var orders = this.props.all_products\n        return (\n            <>\n                <div className=\"orders-brand section\" passthrough={orders} caption={`${orders.length} items`} \n                    onClick={() => {this.props.openSlideUp(\n                        // slideup content\n                        <>\n                            <div className=\"medium\">\n                                Box for {this.props.name} ({this.props.instagram})\n                            </div>\n                            {\n                                orders.map(\n                                    (order) => {\n                                        console.log('ORDER:', order)\n                                        return (\n                                            <SlideUpItem type={'boxes'} order={order} />\n                                        )\n                                    }\n                                )\n                            }\n                        </>\n                    )}}>\n                        <div className=\"medium\" >{orders[0].name}</div>\n                        <div className=\"small\">({this.props.instagram})</div>\n                        <div className=\"small\">\n                            {orders.length} {orders.length == 1 ? 'item' : 'items'}\n                        </div>\n                        <div className=\"small\">\n                            Ordered {this.props.oldest_date.toString()} days ago\n                        </div>\n                        <button className=\"btn\" onClick={(e) => {e.stopPropagation(); this.props.openModal(this.getDeliveryForm())}} style={{backgroundColor: 'var(--red)', marginLeft: '10px'}}>\n                            {\n                                this.state.loading ?\n                                <Loading />\n                                :\n                                this.state.status ?\n                                this.state.status\n                                :\n                                \"Mark as delivered!\"\n                            }\n                        </button>\n                </div>\n            </>\n        )\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        openSlideUp: (content) => {\n            dispatch({\n                type: \"OPEN_SLIDEUP\",\n                content\n            })\n        },\n        openModal: (content) => {\n            dispatch({\n                type: \"OPEN_MODAL\",\n                content\n            })\n        },\n        closeModal: () => {\n            dispatch({\n                type: \"CLOSE_MODAL\"\n            })\n        }\n    }\n} \n\nexport default ItemGroups = connect(null, mapDispatchToProps)(ItemGroups)"]},"metadata":{},"sourceType":"module"}