{"ast":null,"code":"import _defineProperty from \"/home/ice/mvp/mvp-core/templates/webapp/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ice/mvp/mvp-core/templates/webapp/src/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport { combineReducers } from \"redux\";\nimport { Auth } from \"aws-amplify\";\nimport { createStore } from \"redux\";\nimport { makeGetRequest } from \"./api_calls\"; //window.screen.lockOrientation('portrait')\n\nconsole.log(window.screen.orientation); // REDUCERS \n\nconst user = (state = {}, action) => {\n  switch (action.type) {\n    case \"LOG_OUT\":\n      console.log('logging out');\n      return {\n        logged_in: false\n      };\n\n    case \"LOG_IN\":\n      console.log('logging in');\n      return {\n        user_id: action.user_id,\n        gender: action.gender,\n        logged_in: true\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst sideNav = (state = {\n  open: false\n}, action) => {\n  switch (action.type) {\n    case \"TOGGLE_SIDENAV\":\n      console.log('toggling sidenav');\n      return _objectSpread({}, state, {\n        open: !state.open\n      });\n\n    default:\n      return state;\n  }\n};\n\nconst style = (state = {\n  brands: []\n}, action) => {\n  switch (action.type) {\n    case \"SET_BRANDS\":\n      console.log('setting brand');\n      return _objectSpread({}, state, {\n        brands: action.brand\n      });\n\n    case \"UNLIKE_BRAND\":\n      console.log('unliking brand:', action.brand);\n      return _objectSpread({}, state, {\n        brands: state.brands.filter((item, index) => index !== state.brands.indexOf(action.brand))\n      });\n\n    case \"LIKE_BRAND\":\n      console.log('liking brand:', action.brand);\n      return _objectSpread({}, state, {\n        brands: state.brands.concat([action.brand])\n      });\n\n    case \"LOG_OUT\":\n      return {\n        brands: []\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst requests = (state = [], action) => {\n  switch (action.type) {\n    case \"SET_REQUESTS\":\n      return action.requests;\n\n    case \"LOG_OUT\":\n      return [];\n\n    default:\n      return state;\n  }\n};\n\nconst slideUp = (state = {\n  open: false,\n  content: null\n}, action) => {\n  switch (action.type) {\n    case \"OPEN_SLIDEUP\":\n      console.log('opening slideup');\n      return {\n        open: true,\n        content: action.content\n      };\n\n    case \"CLOSE_SLIDEUP\":\n      console.log('closing slideup');\n      return {\n        open: false,\n        content: null\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst modal = (state = {\n  open: false,\n  content: null\n}, action) => {\n  switch (action.type) {\n    case \"OPEN_MODAL\":\n      console.log('opening modal');\n      return {\n        open: true,\n        content: action.content\n      };\n\n    case \"CLOSE_MODAL\":\n      console.log('closing modal');\n      return {\n        open: false,\n        content: null\n      };\n\n    default:\n      return state;\n  }\n};\n\nvar reducer = combineReducers({\n  user,\n  sideNav,\n  style,\n  requests,\n  slideUp,\n  modal\n});\nconst store = createStore(reducer);\n/*\nfetch(\"https://api.myjson.com/bins/19dtxc\")\n.then(\n    ({ data }) => {\n        dispatch({\n            type: \"SET_BRANDS\", \n            brands: data.brands\n        });\n    }\n);\n*/\n// GET LIKED BRANDS\n// is this going to be a problem if users sign in after this has been executed??? \n// could make it a function and call it again when LOGIN is dispatched\n\nAuth.currentSession().then(data => {\n  var IDToken = data.getIdToken().getJwtToken();\n  var options = {\n    method: 'GET',\n    headers: {\n      \"Authorization\": IDToken\n    }\n  };\n  fetch('https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/get-my-liked-brands', options) // get brands user has liked\n  .then(data => data.json()).then(data => {\n    /*\n    console.log(data)\n    console.log(JSON.parse(data.body))\n    console.log(data)\n    */\n    data = JSON.parse(data.body);\n\n    if (data == null) {\n      var liked = [];\n    } else {\n      var liked = data.brands;\n    }\n    /*this.setState({liked: liked}, \n        () => this.setState({btns: this.getBtns(this.icons)})\n    )\n    */\n\n\n    store.dispatch({\n      type: \"SET_BRANDS\",\n      brand: liked\n    });\n  }).catch(err => console.log(err));\n});\nmakeGetRequest('get-my-requests', data => {\n  data = data.body;\n  data = JSON.parse(data);\n  store.dispatch({\n    type: \"SET_REQUESTS\",\n    requests: data\n  });\n}); // GET LOGIN DETS\n\nAuth.currentUserInfo().then(data => {\n  console.log('initial user info:', data);\n\n  if (data) {\n    store.dispatch({\n      type: \"LOG_IN\"\n    });\n  }\n});\nReactDOM.render(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 207\n  },\n  __self: this\n}), document.getElementById('root')); // If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.unregister();","map":{"version":3,"sources":["/home/ice/mvp/mvp-core/templates/webapp/src/index.js"],"names":["React","ReactDOM","App","serviceWorker","Provider","combineReducers","Auth","createStore","makeGetRequest","console","log","window","screen","orientation","user","state","action","type","logged_in","user_id","gender","sideNav","open","style","brands","brand","filter","item","index","indexOf","concat","requests","slideUp","content","modal","reducer","store","currentSession","then","data","IDToken","getIdToken","getJwtToken","options","method","headers","fetch","json","JSON","parse","body","liked","dispatch","catch","err","currentUserInfo","render","document","getElementById","unregister"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux'\nimport { combineReducers } from \"redux\"\nimport { Auth } from \"aws-amplify\"\nimport { createStore} from \"redux\";\nimport { makeGetRequest } from \"./api_calls\"\n\n//window.screen.lockOrientation('portrait')\nconsole.log(window.screen.orientation)\n\n// REDUCERS \nconst user = (state = {}, action) => {\n    switch (action.type) {\n        case \"LOG_OUT\" :\n            console.log('logging out')\n            return {\n                logged_in: false\n            }\n        case \"LOG_IN\" :\n            console.log('logging in')\n            return {\n                user_id: action.user_id,\n                gender: action.gender,\n                logged_in: true\n            }\n        default:\n            return state\n    }\n}\n\nconst sideNav = (state = {open: false}, action) => {\n    switch (action.type) {\n        case \"TOGGLE_SIDENAV\" :\n            console.log('toggling sidenav')\n            return {\n                ...state,\n                open: !state.open\n            }\n        default:\n            return state\n    }\n}\n\nconst style = (state={brands: []}, action) => {\n    switch(action.type) {\n        case \"SET_BRANDS\" :\n            console.log('setting brand')\n            return {\n                ...state,\n                brands: action.brand\n            }\n        case \"UNLIKE_BRAND\" :\n            console.log('unliking brand:', action.brand)\n            return {\n                ...state,\n                brands:  state.brands.filter((item, index) => index !== state.brands.indexOf(action.brand))\n            }\n        case \"LIKE_BRAND\" :\n            console.log('liking brand:', action.brand)\n            return {\n                ...state,\n                brands: state.brands.concat([action.brand])\n            }\n        case \"LOG_OUT\":\n            return {brands: []}\n        default:\n            return state\n    }\n}\n\nconst requests = (state=[], action) => {\n    switch (action.type) {\n        case \"SET_REQUESTS\":\n            return action.requests\n        case \"LOG_OUT\":\n            return []\n        default:\n            return state\n    }\n}\n\nconst slideUp = (state={open: false, content: null}, action) => {\n    switch (action.type) {\n        case \"OPEN_SLIDEUP\":\n            console.log('opening slideup')\n            return {\n                open: true,\n                content: action.content\n            }\n        case \"CLOSE_SLIDEUP\":\n            console.log('closing slideup')\n            return {\n                open: false,\n                content: null\n            }\n        default:\n            return state\n    }\n}\n\nconst modal = (state={open: false, content: null}, action) => {\n    switch (action.type) {\n        case \"OPEN_MODAL\": \n            console.log('opening modal')\n            return {\n                open: true,\n                content: action.content\n            }\n        case \"CLOSE_MODAL\":\n            console.log('closing modal')\n            return {\n                open: false,\n                content: null\n            }\n        default:\n            return state\n    }\n}\n\nvar reducer = combineReducers({\n    user,\n    sideNav,\n    style,\n    requests,\n    slideUp,\n    modal\n})\n\nconst store = createStore(reducer)\n\n/*\nfetch(\"https://api.myjson.com/bins/19dtxc\")\n.then(\n    ({ data }) => {\n        dispatch({\n            type: \"SET_BRANDS\", \n            brands: data.brands\n        });\n    }\n);\n*/\n\n// GET LIKED BRANDS\n// is this going to be a problem if users sign in after this has been executed??? \n// could make it a function and call it again when LOGIN is dispatched\nAuth.currentSession()\n.then(\n    data => {\n        var IDToken = data.getIdToken().getJwtToken()\n        var options = {\n            method: 'GET',\n            headers: {\n                        \"Authorization\": IDToken,\n            }\n        }\n        fetch('https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/get-my-liked-brands', options)       // get brands user has liked\n        .then(data => data.json())\n        .then(data => {\n            /*\n            console.log(data)\n            console.log(JSON.parse(data.body))\n            console.log(data)\n            */\n            data = JSON.parse(data.body)\n            if (data == null) {\n                var liked = []\n            } \n            else {\n                var liked = data.brands\n            }\n            /*this.setState({liked: liked}, \n                () => this.setState({btns: this.getBtns(this.icons)})\n            )\n            */\n            store.dispatch({\n                type: \"SET_BRANDS\",\n                brand: liked\n            })\n        }) \n        .catch(err => console.log(err))    \n    }\n)\n\nmakeGetRequest('get-my-requests', data => {\n    data = data.body\n    data = JSON.parse(data)\n    store.dispatch({type: \"SET_REQUESTS\", requests: data})\n}\n)\n\n// GET LOGIN DETS\nAuth.currentUserInfo()\n.then(\n    data => {\n        console.log('initial user info:', data)\n        if (data) {\n            store.dispatch({type: \"LOG_IN\"})\n        }\n    }\n)\n\nReactDOM.render(\n    <App />\n    ,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"]},"metadata":{},"sourceType":"module"}