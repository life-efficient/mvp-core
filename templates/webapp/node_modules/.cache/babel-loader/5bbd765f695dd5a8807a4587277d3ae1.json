{"ast":null,"code":"var _jsxFileName = \"/home/ice/supermedia/webapp/src/adminComponents/DelegateToStylist.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { makePostRequest } from \"../api_calls\";\nimport queryString from \"query-string\";\nimport Loading from \"../general/Loading\";\n\nclass DelegateToStylist extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      assigned_to: this.props.assigned_to\n    };\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    }, \"Delegate to Stylist\"), this.props.stylists.sort((s1, s2) => {\n      return s1.clients.length - s2.clients.length;\n    }).map(stylist => {\n      return React.createElement(Stylist, {\n        stylist: stylist,\n        assigned_to: this.state.assigned_to,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      });\n    }));\n  }\n\n}\n\nclass Stylist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.delegate = () => {\n      console.log('currently assigned to:', this.state.assigned_to);\n      this.setState({\n        loading: true\n      });\n      var params = queryString.parse(window.location.search);\n      var user_id = params.sub;\n      var stylist_id = this.props.stylist.stylist_id;\n      makePostRequest('admin-delegate-to-stylist', {\n        'user_id': user_id,\n        'stylist_id': stylist_id\n      }, () => {\n        console.log('delegated');\n        this.setState({\n          loading: false,\n          assigned_to: stylist_id\n        });\n      }); // .catch(\n      //     () => {this.setState({loading: false})}\n      // )\n    };\n\n    console.log('STYLIST PROP:', props);\n    var body = [];\n\n    for (var key of ['name', 'code', 'phone_number', 'stylist_id']) {\n      console.log('');\n      body.push(React.createElement(\"div\", {\n        className: \"basic-info-elem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, key, \":\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, props.stylist[key])));\n    }\n\n    this.state = {\n      body,\n      loading: false,\n      assigned_to: this.props.stylist.assigned_to\n    };\n  }\n\n  render() {\n    var assigned = this.props.assigned_to ? this.props.assigned_to.includes(this.props.stylist.stylist_id) : null;\n    return React.createElement(\"div\", {\n      className: \"panel\",\n      style: {\n        backgroundColor: 'white'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, this.state.body, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Currently assigned \", this.props.stylist.clients.length, \" users \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"\",\n      onClick: this.delegate,\n      style: assigned ? {\n        backgroundColor: \"red\"\n      } : {\n        backgroundColor: \"green\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }) : assigned ? \"Unassign\" : \"Assign\"));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    stylists: state.stylists\n  };\n};\n\nexport default DelegateToStylist = connect(mapStateToProps)(DelegateToStylist);","map":{"version":3,"sources":["/home/ice/supermedia/webapp/src/adminComponents/DelegateToStylist.js"],"names":["React","Component","connect","makePostRequest","queryString","Loading","DelegateToStylist","constructor","props","state","assigned_to","render","stylists","sort","s1","s2","clients","length","map","stylist","Stylist","delegate","console","log","setState","loading","params","parse","window","location","search","user_id","sub","stylist_id","body","key","push","assigned","includes","backgroundColor","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport { connect } from \"react-redux\"\nimport { makePostRequest } from \"../api_calls\"\nimport queryString from \"query-string\"\nimport Loading from \"../general/Loading\"\n\nclass DelegateToStylist extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            assigned_to: this.props.assigned_to\n        }\n    }\n\n    \n\n    render() {\n        return (\n            <>\n                <div className=\"medium\">\n                    Delegate to Stylist\n                </div>\n                {\n                    this.props.stylists\n                    .sort(\n                        (s1, s2) => {\n                            return s1.clients.length - s2.clients.length\n                        }\n                    )\n                    .map(\n                        (stylist) => {\n                            return <Stylist stylist={stylist} assigned_to={this.state.assigned_to} />\n                        }\n                    )\n                }\n            </>\n        )\n    }\n}\n\nclass Stylist extends Component{\n    constructor(props) {\n        super(props)\n        console.log('STYLIST PROP:', props)\n        var body = []\n        for (var key of ['name', 'code', 'phone_number', 'stylist_id']) {\n            console.log('')\n            body.push(\n                <div className=\"basic-info-elem\">\n                    <div>{key}:</div>\n                    <div>{props.stylist[key]}</div>\n                </div>\n            )\n        }\n        this.state = {\n            body,\n            loading: false,\n            assigned_to: this.props.stylist.assigned_to,\n        }\n    }\n\n    delegate = () => {\n        console.log('currently assigned to:', this.state.assigned_to)\n        this.setState({loading: true})\n        var params = queryString.parse(window.location.search)\n        var user_id = params.sub\n        var stylist_id = this.props.stylist.stylist_id\n        makePostRequest('admin-delegate-to-stylist', {'user_id': user_id, 'stylist_id': stylist_id},\n            () => {\n                console.log('delegated')\n                this.setState({loading: false, assigned_to: stylist_id})\n            }\n        )\n        // .catch(\n        //     () => {this.setState({loading: false})}\n        // )\n    }\n\n    render() {\n        var assigned = this.props.assigned_to ? this.props.assigned_to.includes(this.props.stylist.stylist_id) : null\n        return (\n            <div className=\"panel\" style={{backgroundColor: 'white'}}>\n                {this.state.body}\n                <strong>Currently assigned {this.props.stylist.clients.length} users </strong><br/>\n                <button className=\"\" onClick={this.delegate} style={assigned ? {backgroundColor: \"red\"} : {backgroundColor : \"green\"}}>\n                    {\n                        this.state.loading ?\n                        <Loading /> :\n                        assigned ? \"Unassign\" : \"Assign\"\n                    }\n                </button>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        stylists: state.stylists\n    }\n}\n\nexport default DelegateToStylist = connect(mapStateToProps)(DelegateToStylist)"]},"metadata":{},"sourceType":"module"}