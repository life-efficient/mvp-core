{"ast":null,"code":"import _defineProperty from \"/home/ice/supermedia/webapp/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ice/supermedia/webapp/src/components/Recommendations.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport { makeGetRequest, makePostRequest } from \"../api_calls\";\nimport \"./Recommendations.css\";\nimport heart from \"../images/icons/heart.png\";\nimport tick from \"../images/icons/tick.png\";\nimport redcross from \"../images/icons/redcross.png\";\nimport Navbar from \"./Navbar\";\n\nclass Recommendation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getStyle = () => {\n      var status = this.props.rec.status;\n\n      switch (status) {\n        case 'needs ordering':\n          return {\n            color: 'orange',\n            opacity: 1,\n            zIndex: 2\n          };\n\n        case 'ordered':\n          return {\n            color: 'orange',\n            opacity: 1,\n            zIndex: 3\n          };\n\n        case 'rejected':\n          return {\n            color: 'red',\n            opacity: 1,\n            zIndex: 3\n          };\n\n        default:\n          return {\n            opacity: '0'\n          };\n      }\n    };\n\n    this.getText = () => {\n      var status = this.props.rec.status;\n\n      switch (status) {\n        case 'needs ordering':\n          return 'On its way!';\n\n        case 'ordered':\n          return 'On its way!';\n\n        case 'delivered':\n          return 'With you';\n\n        case 'returned':\n          return 'Returned';\n\n        case 'purchased':\n          return 'Purchased';\n\n        case 'rejected':\n          return 'Rejected';\n\n        default:\n          return null;\n      }\n    };\n\n    this.orderItem = () => {\n      makePostRequest('update-recommendation', _objectSpread({}, this.props.rec, {\n        action: 'needs ordering'\n      }), () => {\n        console.log('Item added to orders');\n        this.props.refresh();\n      });\n    };\n\n    this.rejectItem = () => {\n      makePostRequest('update-recommendation', _objectSpread({}, this.props.rec, {\n        action: 'reject'\n      }), () => {\n        console.log('Item added to orders');\n        this.props.refresh();\n      });\n    };\n  }\n\n  render() {\n    var rec = this.props.rec;\n    console.log(rec);\n    return React.createElement(\"div\", {\n      className: \"my-rec\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"rec-status\",\n      style: this.getStyle(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, this.getText()), React.createElement(\"div\", {\n      className: \"rec-idx\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, rec.idx, \".\"), React.createElement(\"div\", {\n      className: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, rec.currency, rec.final_price), React.createElement(\"img\", {\n      src: redcross,\n      className: \"reject btn\",\n      id: \"animated-bt\",\n      onClick: this.rejectItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: tick,\n      className: \"try-on btn\",\n      id: \"animated-bt\",\n      onClick: this.orderItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: rec.img_urls[0],\n      className: \"product-img\",\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }));\n  }\n\n}\n\nclass Recommendations extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getMyRecommendations = () => {\n      makeGetRequest('recommendations', data => {\n        console.log('recommendations:', data);\n        data = data.body;\n        data = JSON.parse(data);\n        console.log('recommendations:', data);\n        data = data.map((rec, idx) => {\n          return React.createElement(Recommendation, {\n            rec: rec,\n            key: idx,\n            refresh: this.getMyRecommendations,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          });\n        });\n        console.log(data);\n        console.log(data.length);\n        this.setState({\n          recommendations: data\n        });\n      });\n    };\n\n    this.state = {\n      recommendations: null\n    };\n    this.getMyRecommendations();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Your recommendations\"), this.state.recommendations === null || this.state.recommendations.length == 0 ? null : React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Your recommendations from this week\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), \"Let me know what you want to try on, and what you don't so the next ones will be better!\"), this.state.recommendations === null || this.state.recommendations.length == 0 ? React.createElement(\"div\", {\n      style: {\n        color: 'var(--primary)',\n        marginTop: '60px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"I'll be in contact with you in a minute...\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Keep an eye on your instagram DMs!\")) : React.createElement(\"div\", {\n      className: \"my-recs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, this.state.recommendations));\n  }\n\n}\n\nexport default Recommendations;","map":{"version":3,"sources":["/home/ice/supermedia/webapp/src/components/Recommendations.js"],"names":["React","Component","makeGetRequest","makePostRequest","heart","tick","redcross","Navbar","Recommendation","constructor","props","getStyle","status","rec","color","opacity","zIndex","getText","orderItem","action","console","log","refresh","rejectItem","render","idx","currency","final_price","img_urls","Recommendations","getMyRecommendations","data","body","JSON","parse","map","length","setState","recommendations","state","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport { makeGetRequest, makePostRequest } from \"../api_calls\"\nimport \"./Recommendations.css\"\nimport heart from \"../images/icons/heart.png\"\nimport tick from \"../images/icons/tick.png\"\nimport redcross from \"../images/icons/redcross.png\"\nimport Navbar from \"./Navbar\"\n\nclass Recommendation extends Component {\n    constructor(props) {\n        super(props)\n    }\n\n    getStyle = () => {\n        var status = this.props.rec.status\n        switch(status) {\n            case 'needs ordering': \n                return {color: 'orange', opacity: 1, zIndex: 2}\n            case 'ordered': \n                return {color: 'orange', opacity: 1, zIndex: 3}\n            case 'rejected':\n                return {color: 'red', opacity: 1, zIndex: 3}\n            default:\n                return {opacity: '0'}\n        }\n    }\n\n    getText = () => {\n        var status = this.props.rec.status\n        switch(status) {\n            case 'needs ordering': return 'On its way!'\n            case 'ordered': return 'On its way!'\n            case 'delivered': return 'With you'\n            case 'returned':return 'Returned'            \n            case 'purchased': return 'Purchased'\n            case 'rejected': return 'Rejected'\n            default: return null\n        }\n    }\n\n    orderItem = () => {\n        makePostRequest('update-recommendation', {...this.props.rec, action: 'needs ordering'},\n            () => {\n                console.log('Item added to orders')\n                this.props.refresh()\n            }\n        )\n    }\n\n    rejectItem = () => {\n        makePostRequest('update-recommendation', {...this.props.rec, action: 'reject'},\n            () => {\n                console.log('Item added to orders')\n                this.props.refresh()\n            }\n )\n    }\n\n    render() {\n        var rec = this.props.rec\n        console.log(rec)\n        return (\n            <div className=\"my-rec\">\n                <div className=\"rec-status\" style={this.getStyle()}>{this.getText()}</div>\n                <div className=\"rec-idx\">{rec.idx}.</div>\n                <div className=\"price\">{rec.currency}{rec.final_price}</div>\n                {/* <div className=\"reject btn\">Reject</div> */}\n                <img src={redcross} className=\"reject btn\" id='animated-bt' onClick={this.rejectItem}/>\n                {/* <div className=\"try-on btn\" id='animated-bt' onClick={this.orderItem}>Try on for free</div> */}\n                <img src={tick} className=\"try-on btn\" id='animated-bt' onClick={this.orderItem}/>\n                <img src={rec.img_urls[0]} className=\"product-img\" alt=\"\"/>\n            </div>\n        )\n    }\n}\n\nclass Recommendations extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            recommendations: null\n        }\n        this.getMyRecommendations()\n    }\n\n    getMyRecommendations = () => {\n        makeGetRequest('recommendations',\n            (data) =>{\n                \n                console.log('recommendations:', data)\n                data = data.body\n                data = JSON.parse(data)\n                console.log('recommendations:', data)\n                data = data.map(\n                    (rec, idx) => {\n                        return <Recommendation rec={rec} key={idx} refresh={this.getMyRecommendations}/>\n                    }\n                )\n                console.log(data)\n                console.log(data.length)\n                this.setState({recommendations: data})\n            }\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"body\">\n                <Navbar />\n                <div className=\"medium\">\n                    Your recommendations\n                </div>\n                {(this.state.recommendations === null || this.state.recommendations.length == 0) ? \n                    null\n                    :\n                    <div className=\"small\">\n                        <strong>Your recommendations from this week</strong>\n                        <br/>\n                        <br/>\n                        Let me know what you want to try on, and what you don't so the next ones will be better!\n                    </div>\n                }\n                    \n                {\n                    (this.state.recommendations === null || this.state.recommendations.length == 0) ? \n                        <div style={{color: 'var(--primary)', marginTop: '60px'}}>\n                            I'll be in contact with you in a minute...\n                            <br/>\n                            <br/>\n                            <strong>Keep an eye on your instagram DMs!</strong>\n                        </div>\n                        :\n                    <div className=\"my-recs\">\n                        {this.state.recommendations}\n                    </div>\n                }\n            </div>\n        )\n    }\n}\n\nexport default Recommendations"]},"metadata":{},"sourceType":"module"}