{"ast":null,"code":"import _defineProperty from \"/home/ice/supermedia/webapp/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/ice/supermedia/webapp/src/adminComponents/AddBusiness.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from \"react\";\nimport Loading from \"../general/Loading\";\nimport { makePostRequest } from \"../api_calls\";\nimport AddOptions from \"../general/form_components/AddOptions\";\nimport Navbar from \"../components/Navbar\";\n\nclass AddBusiness extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addOption = (key, val) => {\n      var rewards = _objectSpread({}, this.state.rewards, {\n        [key]: val\n      });\n\n      var rewards_array = Object.keys(rewards).map(k => {\n        return [k, rewards[k]];\n      });\n      rewards_array.sort((first, second) => {\n        return second[1] - first[1];\n      });\n      var sorted_rewards = {};\n      rewards_array.map(([k, v]) => {\n        sorted_rewards[k] = v;\n      });\n      rewards = sorted_rewards;\n      this.setState({\n        rewards\n      }, () => {\n        console.log(this.state);\n      });\n    };\n\n    this.removeOption = e => {\n      var key = e.target.id;\n      var rewards = this.state.rewards;\n      console.log(rewards);\n      delete rewards[key];\n      console.log(key);\n      console.log(rewards);\n      this.setState({\n        rewards\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      }, () => {\n        console.log(this.state);\n      });\n    };\n\n    this.handleSubmit = () => {\n      console.log('submitting');\n      makePostRequest('admin/add-business', this.state, response => {\n        console.log(response);\n        console.log('done');\n        this.props.closeSlideUp();\n      });\n    };\n\n    this.state = {\n      loading: false,\n      business_name: '',\n      code: '',\n      instagram: '',\n      location: '',\n      paypal: '',\n      call_time: '',\n      rewards: {}\n    };\n  }\n\n  render() {\n    var isValid = this.state.business_name && this.state.instagram;\n    console.log(isValid);\n    return React.createElement(React.Fragment, null, React.createElement(Navbar, {\n      back: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Add a business!\"), React.createElement(\"div\", {\n      className: \"form-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Business Name\"), React.createElement(\"input\", {\n      id: \"business_name\",\n      value: this.state.business_name,\n      onChange: this.handleChange,\n      className: \"text-response\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"field-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Instagram\"), React.createElement(\"input\", {\n      id: \"instagram\",\n      value: this.state.instagram,\n      onChange: this.handleChange,\n      className: \"text-response\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"field-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Instagram Password\"), React.createElement(\"input\", {\n      id: \"instagram_password\",\n      type: \"password\",\n      value: this.state.instagram_password,\n      onChange: this.handleChange,\n      className: \"text-response\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"field-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"field-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Location\"), React.createElement(\"input\", {\n      id: \"location\",\n      value: this.state.location,\n      onChange: this.handleChange,\n      className: \"text-response\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(AddOptions, {\n      title: \"Reward scheme\",\n      key_name: \"Points\",\n      val_name: \"Reward\",\n      options: this.state.rewards,\n      addOption: this.addOption,\n      removeOption: this.removeOption,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn\",\n      disabled: !isValid,\n      onClick: this.handleSubmit,\n      style: {\n        opacity: isValid ? 1 : 0.2\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }) : \"Submit\")))));\n  }\n\n}\n\nexport default AddBusiness;","map":{"version":3,"sources":["/home/ice/supermedia/webapp/src/adminComponents/AddBusiness.js"],"names":["React","Component","Loading","makePostRequest","AddOptions","Navbar","AddBusiness","constructor","props","addOption","key","val","rewards","state","rewards_array","Object","keys","map","k","sort","first","second","sorted_rewards","v","setState","console","log","removeOption","e","target","id","handleChange","value","handleSubmit","response","closeSlideUp","loading","business_name","code","instagram","location","paypal","call_time","render","isValid","instagram_password","opacity"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport Loading from \"../general/Loading\"\nimport { makePostRequest } from \"../api_calls\"\nimport AddOptions from \"../general/form_components/AddOptions\"\nimport Navbar from \"../components/Navbar\";\n\nclass AddBusiness extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            loading: false,\n            business_name: '',\n            code: '',\n            instagram: '',\n            location: '',\n            paypal: '',\n            call_time: '',\n            rewards: {}\n        }\n    }\n\n    addOption = (key, val) => {\n        var rewards = {\n            ...this.state.rewards,\n            [key]: val\n        }\n\n        var rewards_array = Object.keys(rewards).map(\n            (k) => {\n                return [k, rewards[k]]\n            }\n        )\n        rewards_array.sort(\n            (first, second) => {\n                return second[1] - first[1];\n            }\n        )\n        var sorted_rewards = {}\n        rewards_array.map(\n            ([k, v]) => {\n                sorted_rewards[k] = v\n            }\n        )\n        rewards = sorted_rewards\n\n        this.setState(\n            {rewards},\n            () => {console.log(this.state)}\n        )\n    }\n\n    removeOption = (e) => {\n        var key = e.target.id\n        var rewards = this.state.rewards\n        console.log(rewards)\n        delete rewards[key]\n        console.log(key)\n        console.log(rewards)\n        this.setState({\n            rewards\n        })\n    }\n\n    handleChange = (e) => {\n        this.setState({\n            [e.target.id]: e.target.value\n        },\n            () => {\n                console.log(this.state)\n            }\n        )\n    }\n\n    handleSubmit = () => {\n        console.log('submitting')\n        makePostRequest('admin/add-business', this.state,\n            (response) => {\n                console.log(response)\n                console.log('done')\n                this.props.closeSlideUp()\n            }\n        )\n    }\n\n    render() {\n        var isValid = this.state.business_name && this.state.instagram\n        console.log(isValid)\n        return (\n            <>\n            <Navbar back={true} />\n            <div className=\"body\">\n                <div className=\"panel\">\n                    <div className=\"medium\">\n                        Add a business!\n                    </div>\n                    <div className=\"form-container\">\n                        <div className=\"field-container\">\n                            <div className=\"field-title\">\n                                Business Name\n                            </div>\n                            <input id='business_name' value={this.state.business_name} onChange={this.handleChange} className=\"text-response\"/>\n                        </div>\n                        <div className=\"field-container\">\n                            <div className=\"field-title\">\n                                Instagram\n                            </div>\n                            <input id='instagram' value={this.state.instagram} onChange={this.handleChange} className=\"text-response\"/>\n                        </div>\n                        <div className=\"field-container\">\n                            <div className=\"field-title\">\n                                Instagram Password\n                            </div>\n                            <input id='instagram_password' type=\"password\" value={this.state.instagram_password} onChange={this.handleChange} className=\"text-response\"/>\n                        </div>\n                        <div className=\"field-container\">\n                            <div className=\"field-title\">\n                                Location\n                            </div>\n                            <input id='location' value={this.state.location} onChange={this.handleChange} className=\"text-response\"/>\n                        </div>\n                        <AddOptions title='Reward scheme' key_name='Points' val_name='Reward' options={this.state.rewards} addOption={this.addOption} removeOption={this.removeOption} />\n\n                        {/* <div className=\"field-container\">\n                            <div className=\"field-title\">\n                                Paypal\n                            </div>\n                            <input id='paypal' value={this.state.paypal} onChange={this.handleChange} className=\"text-response\"/>\n                        </div>\n                        <div className=\"field-container\">\n                            <div className=\"field-title\">\n                                Call time\n                            </div>\n                            <input id='call_time' value={this.state.call_time} onChange={this.handleChange} className=\"text-response\"/>\n                        </div> */}\n                        <button className=\"btn\" disabled={!isValid} onClick={this.handleSubmit} style={{opacity: isValid ? 1 : 0.2}}>\n                            {\n                                this.state.loading ?\n                                <Loading /> :\n                                \"Submit\"\n                            }\n                        </button>\n                    </div>\n                    {/* <StripeProvider apiKey=\"pk_test_98UmCoevgIbIlIhQ23DgfoPq00nJOgxucq\">\n                        <div className=\"example\">\n                        <h1>React Stripe Elements Example</h1>\n                        <Elements>\n                            <CheckoutForm />\n                        </Elements>\n                        </div>\n                    </StripeProvider> */}\n                </div>\n            </div>\n            </>\n        )\n    }\n}\n\nexport default AddBusiness"]},"metadata":{},"sourceType":"module"}