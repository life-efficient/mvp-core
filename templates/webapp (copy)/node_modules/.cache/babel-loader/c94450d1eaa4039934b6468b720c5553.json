{"ast":null,"code":"var _jsxFileName = \"/home/ice/supermedia/webapp/src/adminComponents/AllUsers.js\";\nimport React, { Component } from \"react\";\nimport { makeGetRequest, makePostRequest } from \"../api_calls\";\nimport Section from \"../components/Section\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport Navbar from \"../components/Navbar\";\nimport Loading from \"../general/Loading\";\nimport \"./AllUsers.css\";\nimport Searchbar from \"../general/Searchbar\";\n\nclass AllUsers extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getAssignedStylistName = user_id => {\n      var stylist_names = [];\n\n      for (var stylist of this.props.stylists) {\n        if (stylist.clients.includes(user_id)) {\n          stylist_names.push(stylist.name);\n        }\n      }\n\n      stylist_names = stylist_names.reduce((accumulator, currentVal) => {\n        return currentVal + ', ' + accumulator;\n      }, '');\n      console.log(stylist_names);\n      return stylist_names;\n    };\n\n    this.componentDidMount = () => {\n      makeGetRequest('admin-get-all-users', users => {\n        console.log(users);\n        users = users.body;\n        users = JSON.parse(users);\n        users = users.sort((user1, user2) => {\n          return new Date(user2.joined) - new Date(user1.joined);\n        });\n        console.log(users);\n        users = users.map(user => {\n          console.log('user:', user);\n          console.log(user.requests);\n          var stylist;\n          return React.createElement(User, {\n            user: user,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53\n            },\n            __self: this\n          });\n        });\n        this.setState({\n          unserved_useruests: users\n        });\n      });\n    };\n\n    this.path = this.props.match.path;\n    this.state = {\n      unserved_useruests: null\n    };\n  }\n\n  render() {\n    console.log('stylists:', this.props.stylists);\n    return React.createElement(React.Fragment, null, React.createElement(Navbar, {\n      back: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"body\",\n      style: {\n        backgroundColor: '#EA653C'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"All users\"), this.state.unserved_useruests ? this.state.unserved_useruests : React.createElement(Loading, {\n      boxed: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass User extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.prioritise = e => {\n      e.preventDefault();\n      console.log('prioritising');\n      makePostRequest('admin-prioritise', this.props.user.user_sub, () => {\n        console.log('prioritised!');\n      });\n    };\n  }\n\n  render() {\n    var user = this.props.user;\n    return React.createElement(\"div\", {\n      section: \"user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: {\n        pathname: \"/5015db37-0d03-4f44-93a5-606ac215935b/admin/user\",\n        search: \"sub=\".concat(user.user_sub),\n        state: user\n      },\n      title: user.name,\n      className: \"user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        paddingRight: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"medium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, user.name), React.createElement(\"div\", {\n      className: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, user.joined)), user.referral ? React.createElement(\"div\", {\n      className: \"tag\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, user.referral) : null, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, user.requests ? user.requests[user.requests.length - 1].request : null)), React.createElement(\"button\", {\n      className: \"prioritise\",\n      onClick: this.prioritise,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Prioritise\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    unserved_useruests: state.useruests,\n    stylists: state.stylists\n  };\n};\n\nexport default AllUsers = connect(mapStateToProps)(AllUsers);","map":{"version":3,"sources":["/home/ice/supermedia/webapp/src/adminComponents/AllUsers.js"],"names":["React","Component","makeGetRequest","makePostRequest","Section","connect","Link","Navbar","Loading","Searchbar","AllUsers","constructor","props","getAssignedStylistName","user_id","stylist_names","stylist","stylists","clients","includes","push","name","reduce","accumulator","currentVal","console","log","componentDidMount","users","body","JSON","parse","sort","user1","user2","Date","joined","map","user","requests","setState","unserved_useruests","path","match","state","render","backgroundColor","User","prioritise","e","preventDefault","user_sub","pathname","search","display","flexDirection","width","justifyContent","paddingRight","referral","length","request","mapStateToProps","useruests"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport { makeGetRequest, makePostRequest } from \"../api_calls\"\nimport Section from \"../components/Section\"\nimport { connect } from \"react-redux\"\nimport { Link } from \"react-router-dom\"\nimport Navbar from \"../components/Navbar\"\nimport Loading from \"../general/Loading\"\nimport \"./AllUsers.css\"\nimport Searchbar from \"../general/Searchbar\";\n\nclass AllUsers extends Component {\n    constructor(props) {\n        super(props)\n        this.path = this.props.match.path\n        this.state = {\n            unserved_useruests: null\n        }\n    }\n\n    getAssignedStylistName = (user_id) => {\n        var stylist_names = []\n        for (var stylist of this.props.stylists) {\n            if (stylist.clients.includes(user_id)) {\n                stylist_names.push(stylist.name)\n            }\n        }\n        stylist_names = stylist_names.reduce(\n            (accumulator, currentVal) => {return currentVal+ ', ' + accumulator },\n            ''\n        )\n        console.log(stylist_names)\n        return stylist_names\n    }\n\n    componentDidMount = () => {\n        makeGetRequest('admin-get-all-users',\n            (users) => {\n                console.log(users)\n                users = users.body\n                users = JSON.parse(users)\n                users = users.sort(\n                    (user1, user2) => {\n                        return new Date(user2.joined) - new Date(user1.joined)\n                    }\n                )\n                console.log(users)\n                users = users.map(\n                    (user) => {\n                        console.log('user:', user)\n                        console.log(user.requests)\n                        var stylist\n                        return (\n                            <User user={user} />\n                        )\n                    }\n                )\n                this.setState({unserved_useruests: users})\n            }\n        )\n    }\n\n    render () {\n        console.log('stylists:', this.props.stylists)\n        return (\n            <>\n            <Navbar back={true}/>\n            <div className=\"body\" style={{backgroundColor: '#EA653C'}}>\n                <div className=\"medium page-title\">\n                    All users\n                </div>\n                {/* <div className=\"\">\n                    <Searchbar map={(item) => {return <User user={item} />}} prompt='Search by IG username...' />\n                </div> */}\n                {/* <User user={{\n                    acq_channel: \"Instagram\",\n                    contact_method: \"phone_number\",\n                    gender: \"Female\",\n                    joined: \"2019-06-11 01:17:11\",\n                    location: \"London\",\n                    name: \"Sam\",\n                    phone_number: \"4407793818344\",\n                    price_range: \"less than 80\",\n                    requests: [{\n                        request: \"Dress\",\n                        served: false,\n                        timestamp: \"2019-06-11 01:17:11\"\n                    }],\n                    swipe_responses: [],\n                    user_sub: \"7180428c-7600-4114-ab0a-1a2c52300b8c\"\n                }}/> */}\n                {\n                    this.state.unserved_useruests ?\n                    this.state.unserved_useruests :\n                    <Loading boxed={true}/>\n                }\n            </div>\n            </>\n            \n        )\n    }\n}\n\nclass User extends Component {\n\n    prioritise = (e) => {\n        e.preventDefault()\n        console.log('prioritising')\n        makePostRequest('admin-prioritise', this.props.user.user_sub,\n            () => {\n                console.log('prioritised!')\n            }\n        )\n    }\n\n    render() {\n        var user = this.props.user\n        return (\n            <div section=\"user\">\n                <Link to={{pathname: `/5015db37-0d03-4f44-93a5-606ac215935b/admin/user`, search: `sub=${user.user_sub}`, state: user}} title={user.name} className=\"user\">\n                    <div style={{display: 'flex', flexDirection: 'column', width: '100%'}}>\n\n                        <div style={{display: 'flex', justifyContent: 'space-between', paddingRight: '20px'}}>\n                            <div className=\"medium\">\n                                {user.name}\n                            </div>\n                            <div className=\"small\">\n                                {user.joined}\n                            </div>\n                        </div>\n                        {\n                            user.referral ?\n                            <div className=\"tag\">\n                                {user.referral}\n                            </div>\n                            :\n                            null\n                        }\n                        <div>\n                            {user.requests ? user.requests[user.requests.length - 1].request : null}\n                        </div>\n                    </div>\n\n                    <button className=\"prioritise\" onClick={this.prioritise}>\n                        Prioritise\n                    </button>\n                </Link>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) =>{\n    return {\n        unserved_useruests: state.useruests,\n        stylists: state.stylists\n    }\n}\n\nexport default AllUsers = connect(mapStateToProps)(AllUsers)"]},"metadata":{},"sourceType":"module"}