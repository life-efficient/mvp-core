{"ast":null,"code":"import { connect } from \"react-redux\";\nimport { Auth } from \"aws-amplify\";\nexport const makeGetRequest = (endpoint, callback, handleErr = err => {\n  console.log(err);\n}) => {\n  Auth.currentSession().then(data => {\n    console.log('currentSession:', data);\n    var IDToken = data.getIdToken().getJwtToken();\n    var options = {\n      headers: {\n        \"Authorization\": IDToken,\n        'Content-Type': 'application/json'\n      }\n    };\n    var url = \"https://46zwadhds2.execute-api.eu-west-2.amazonaws.com/prod/\".concat(endpoint);\n    console.log('Making request to:', url);\n    fetch(url, options).then(data => {\n      console.log(\"Response from \".concat(endpoint, \":\")); // console.log('RAW RESPONSE:', data)\n\n      data = data.json();\n      console.log('RESPONSE JSON:', data);\n      return data;\n    }).then(data => callback(data)).catch(err => handleErr(err));\n  }, err => {\n    console.log(endpoint);\n    console.log('AN ERROR OCCURED WHILST GETTING THE SESSION');\n    console.log(err);\n  });\n};\nexport const makePostRequest = (endpoint, body, callback, handleErr = err => {\n  console.log(err);\n}) => {\n  Auth.currentSession().then(data => {\n    var IDToken = data.getIdToken().getJwtToken(); // console.log(IDToken)\n    // console.log(JSON.stringify(body))\n\n    var options = {\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify(body),\n      headers: {\n        \"Authorization\": IDToken,\n        'Content-Type': 'application/json'\n      }\n    };\n    var url = \"https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/\".concat(endpoint); // console.log('Making request to:', url)\n\n    fetch(url, options).then(data => {\n      // console.log(`Response from ${endpoint}:`)\n      // console.log('RAW RESPONSE:', data)\n      // console.log('RESPONSE JSON:', data)\n      return data;\n    }).then(data => callback(data)).catch(err => handleErr(err));\n  });\n};\nexport const postStyle = style => {\n  console.log('posting style');\n  Auth.currentSession().then(data => {\n    console.log('currentSession:', data);\n    var IDToken = data.getIdToken().getJwtToken();\n    var options = {\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify(style),\n      headers: {\n        \"Authorization\": IDToken,\n        'Content-Type': 'application/json'\n      }\n    };\n    fetch('https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/post-my-liked-brands', options).then(data => {\n      console.log('brands sent');\n    });\n  }, err => {\n    console.log('AN ERROR OCCURED WHILST GETTING THE SESSION');\n    console.log(err);\n  });\n};\nexport const getMyRequests = makeGetRequest('get-my-requests');\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    notify: content => {\n      dispatch({\n        type: \"NOTIFY\",\n        content\n      });\n    }\n  };\n}; // export var makePostRequest = connect(null, mapDispatchToProps)(makePostRequest)","map":{"version":3,"sources":["/home/ice/supermedia/webapp/src/api_calls.js"],"names":["connect","Auth","makeGetRequest","endpoint","callback","handleErr","err","console","log","currentSession","then","data","IDToken","getIdToken","getJwtToken","options","headers","url","fetch","json","catch","makePostRequest","body","method","mode","JSON","stringify","postStyle","style","getMyRequests","mapDispatchToProps","dispatch","notify","content","type"],"mappings":"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","sourcesContent":["import { connect } from \"react-redux\";\nimport { Auth } from \"aws-amplify\"\n\nexport const makeGetRequest = (endpoint, callback, handleErr=(err)=>{console.log(err)}) => {\n    Auth.currentSession()\n    .then(\n        data => {\n            console.log('currentSession:', data)\n            var IDToken = data.getIdToken().getJwtToken()\n            var options = {\n                headers: {\n                    \"Authorization\": IDToken,\n                    'Content-Type': 'application/json'\n                }\n            }\n            var url = `https://46zwadhds2.execute-api.eu-west-2.amazonaws.com/prod/${endpoint}`\n            console.log('Making request to:', url)\n            fetch(url, options)\n            .then(\n                (data) => {\n                    console.log(`Response from ${endpoint}:`)\n                    // console.log('RAW RESPONSE:', data)\n                    data = data.json()\n                    console.log('RESPONSE JSON:', data)\n                    return data\n                }\n            )\n            .then(\n                data => callback(data)\n            )\n            .catch(\n                err =>  handleErr(err)\n            )\n        },\n        err => {\n            console.log(endpoint)\n            console.log('AN ERROR OCCURED WHILST GETTING THE SESSION')\n            console.log(err)\n        }\n    )\n}\n\nexport const makePostRequest = (endpoint, body, callback, handleErr=(err)=>{console.log(err)}) => {\n    Auth.currentSession()\n    .then(\n        data => {\n            var IDToken = data.getIdToken().getJwtToken()\n            // console.log(IDToken)\n            // console.log(JSON.stringify(body))\n            var options = {\n                method: 'POST',\n                mode: 'cors',\n                body: JSON.stringify(body),\n                headers: {\n                    \"Authorization\": IDToken,\n                    'Content-Type': 'application/json'\n                }\n            }\n            var url = `https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/${endpoint}`\n            // console.log('Making request to:', url)\n            fetch(url , options) \n            .then(\n                (data) => {\n                    // console.log(`Response from ${endpoint}:`)\n                    // console.log('RAW RESPONSE:', data)\n                    // console.log('RESPONSE JSON:', data)\n                    return data\n                }\n            )\n            .then(\n                data => callback(data)\n            )\n            .catch(\n                err =>  handleErr(err)\n            )\n        }\n    )\n}\n\nexport const postStyle = (style) => {\n    console.log('posting style')\n    Auth.currentSession()\n    .then(\n        data => {\n            console.log('currentSession:', data)\n            var IDToken = data.getIdToken().getJwtToken()\n            var options = {\n                method: 'POST',\n                mode: 'cors',\n                body: JSON.stringify(style),\n                headers: {\n                    \"Authorization\": IDToken,\n                    'Content-Type': 'application/json'\n                }\n            }\n            fetch('https://ikpilfsw9a.execute-api.eu-west-2.amazonaws.com/prod/post-my-liked-brands', options)\n            .then(\n                data => {\n                    console.log('brands sent')\n                }\n            )\n        },\n        err => {\n            console.log('AN ERROR OCCURED WHILST GETTING THE SESSION')\n            console.log(err)\n        }\n    )\n}\n\nexport const getMyRequests = makeGetRequest('get-my-requests', \n\n)\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        notify: (content) => {\n            dispatch({\n                type: \"NOTIFY\",\n                content\n            })\n        }\n    }\n}\n\n// export var makePostRequest = connect(null, mapDispatchToProps)(makePostRequest)"]},"metadata":{},"sourceType":"module"}